

-- Gui to Lua
-- Version: 3.2

-- Instances:

if not game:IsLoaded() then
	game.Loaded:Wait()
end

local Library = {}

-- Random UI Name
local LibraryName = tostring(math.random(100000,200000))..tostring(math.random(100000,200000))..tostring(math.random(100000,200000))

local UserInputService = game:GetService("UserInputService")

function Library:Drag(obj)
	assert(typeof(obj) == "Instance" and obj:IsA("GuiObject"), "obj must be a GuiObject")

	local gui = obj
	local dragging = false
	local dragStart
	local startPos

	local function update(input)
		local delta = input.Position - dragStart
		gui.Position = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
	end

	gui.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = gui.Position

			local conn
			conn = input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
					conn:Disconnect()
				end
			end)
		end
	end)

	gui.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			if dragging then
				update(input)
			end
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
			update(input)
		end
	end)
end

function Library:DragMultiple(...)
	local args = {...}
	for _, uiObject in ipairs(args) do
		self:Drag(uiObject)
	end
end

-- Library:DragMultiple(Menu, Topbar, ImageButtonK)



--animations
local TweenService = game:GetService("TweenService")

local function CreateTween(element, properties, duration, style, direction, repeatCount, reverses)
	-- Check if element exists and is valid
	if not element or not element.Parent then
		warn("TweenService:Create failed - element is null or has no parent")
		return nil
	end

	local info = TweenInfo.new(duration or 0.5, style or Enum.EasingStyle.Linear, direction or Enum.EasingDirection.InOut, repeatCount or 0, reverses or false)
	local success, tween = pcall(function()
		return TweenService:Create(element, info, properties)
	end)

	if success and tween then
		tween:Play()
		return tween
	else
		warn("Failed to create tween for element: " .. tostring(element))
		return nil
	end
end




local Animations = {}

function Animations.Fade(element, targetTransparency, duration)
	return CreateTween(element, {BackgroundTransparency = targetTransparency}, duration)
end

function Animations.FadeIn(element, duration)
	return Animations.Fade(element, 0, duration)
end

function Animations.FadeOut(element, duration)
	return Animations.Fade(element, 1, duration)
end

function Animations.Move(element, targetPosition, duration)
	return CreateTween(element, {Position = targetPosition}, duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
end

function Animations.Scale(element, targetSize, duration)
	return CreateTween(element, {Size = targetSize}, duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
end

function Animations.Rotate(element, targetRotation, duration, continuous)
	local tween = CreateTween(element, {Rotation = targetRotation}, duration)
	if continuous then
		tween.Completed:Connect(function()
			element.Rotation = 0
			tween:Play()
		end)
	end
	return tween
end

function Animations.Pulse(element, scaleFactor, duration)
	local size = element.Size
	scaleFactor = scaleFactor or 1.2
	return CreateTween(element, {
		Size = UDim2.new(
			size.X.Scale * scaleFactor, size.X.Offset,
			size.Y.Scale * scaleFactor, size.Y.Offset
		)
	}, duration / 2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
end

function Animations.Shake(element, amount, duration)
	local pos = element.Position
	amount = amount or 10
	return CreateTween(element, {
		Position = UDim2.new(pos.X.Scale, pos.X.Offset + amount, pos.Y.Scale, pos.Y.Offset)
	}, duration, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
end

function Animations.Color(element, targetColor, duration)
	return CreateTween(element, {BackgroundColor3 = targetColor}, duration)
end

function Animations.Bounce(element, height, duration)
	height = height or 0.2
	return CreateTween(element, {
		Position = UDim2.new(element.Position.X.Scale, element.Position.X.Offset, height, 0)
	}, duration, Enum.EasingStyle.Bounce)
end

function Animations.Flip(element, targetRotation, duration)
	return CreateTween(element, {Rotation = targetRotation}, duration)
end

function Animations.Wobble(element, amount, duration)
	local pos = element.Position
	amount = amount or 10
	return CreateTween(element, {
		Position = UDim2.new(pos.X.Scale, pos.X.Offset + amount, pos.Y.Scale, pos.Y.Offset)
	}, duration, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
end

function Animations.FadeAndMove(element, targetTransparency, targetPosition, duration)
	return CreateTween(element, {BackgroundTransparency = targetTransparency, Position = targetPosition}, duration)
end

function Animations.RotateAndScale(element, targetRotation, targetSize, duration)
	return CreateTween(element, {Rotation = targetRotation, Size = targetSize}, duration)
end

function Animations.Flash(element, color1, color2, duration)
	local half = duration / 2
	while true do
		CreateTween(element, {BackgroundColor3 = color1}, half).Completed:Wait()
		CreateTween(element, {BackgroundColor3 = color2}, half).Completed:Wait()
	end
end

function Animations.Expand(element, targetSize, duration)
	return CreateTween(element, {Size = targetSize}, duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
end

function Animations.Contract(element, duration)
	return CreateTween(element, {Size = UDim2.new(0, 0, 0, 0)}, duration, Enum.EasingStyle.Quad, Enum.EasingDirection.In)
end


function Library:Tween(obj, props, duration)
	local TweenService = game:GetService("TweenService")
	TweenService:Create(obj, TweenInfo.new(duration or 0.15, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), props):Play()
end


function Library:GlowEffect(Object, Color, Duration)
	local Glow = Instance.new("UIStroke")
	Glow.Color = Color
	Glow.Thickness = 2
	Glow.Transparency = 1
	Glow.Parent = Object
	self:Tween(Glow, {Transparency = 0}, Duration / 2)
	task.wait(Duration / 2)
	self:Tween(Glow, {Transparency = 1}, Duration / 2)
	task.delay(Duration, function()
		if Glow and Glow.Parent then Glow:Destroy() end
	end)
end

function Library:WaveEffect(Parent, Color)
	local Wave = Instance.new("Frame")
	Wave.Size = UDim2.new(0, 0, 0, 0)
	Wave.Position = UDim2.new(0.5, 0, 0.5, 0)
	Wave.BackgroundColor3 = Color
	Wave.BackgroundTransparency = 0.7
	Wave.BorderSizePixel = 0
	Wave.Parent = Parent
	local Corner = Instance.new("UICorner")
	Corner.CornerRadius = UDim.new(1, 0)
	Corner.Parent = Wave
	self:Tween(Wave, {
		Size = UDim2.new(2, 0, 2, 0),
		Position = UDim2.new(-0.5, 0, -0.5, 0),
		BackgroundTransparency = 1
	}, 0.8, Enum.EasingStyle.Quad)
	task.delay(0.8, function()
		if Wave and Wave.Parent then Wave:Destroy() end
	end)
end



--example

--[[

fadeIn(frame, 0.5)
fadeOut(frame, 0.5)
slide(frame, 0.5, UDim2.new(0.5, 0, 0.5, 0))
scale(frame, 0.5, UDim2.new(1, 0, 1, 0))
rotate(frame, 0.5, 180)
pulse(frame, 1, 1.2)
shake(frame, 1, 10)
colorChange(frame, Color3.fromRGB(255, 0, 0), 0.5)
bounce(frame, 0.5, 0.2)
flip(frame, 0.5, 180)
wobble(frame, 1, 10)
fadeAndMove(frame, 0.5, 0.5, UDim2.new(0.5, 0, 0.5, 0))
rotateAndScale(frame, 0.5, 180, UDim2.new(1, 0, 1, 0))
flash(frame, 1.5, Color3.fromRGB(255, 0, 0), Color3.fromRGB(0, 255, 0))
expand(frame, 0.5, UDim2.new(1, 0, 1, 0))
contract(frame, 0.5)


]]--




--Mains
Library.Themes = {
	-- ðŸ–¤ DARK NEO
	Dark = {
		Background = Color3.fromRGB(18, 18, 20),
		Topbar = Color3.fromRGB(25, 25, 28),
		Element = Color3.fromRGB(30, 30, 33),
		ElementHover = Color3.fromRGB(50, 50, 55),
		ElementActive = Color3.fromRGB(22, 22, 25),

		Text = Color3.fromRGB(240, 240, 245),
		TextSecondary = Color3.fromRGB(180, 180, 185),
		TextMuted = Color3.fromRGB(120, 120, 125),
		TextHover = Color3.fromRGB(255, 255, 255),

		Accent = Color3.fromRGB(0, 153, 255),
		AccentHover = Color3.fromRGB(0, 180, 255),
		Success = Color3.fromRGB(0, 255, 120),

		Stroke = Color3.fromRGB(50, 50, 55),
		StrokeHover = Color3.fromRGB(80, 80, 90),
		StrokeActive = Color3.fromRGB(0, 153, 255),

		TabBackground = Color3.fromRGB(25, 25, 28),
		TabText = Color3.fromRGB(220, 220, 230),
		TabHover = Color3.fromRGB(45, 45, 50),
		TabActive = Color3.fromRGB(0, 153, 255),
		Icon = Color3.fromRGB(200, 200, 210)
	},

	-- â˜€ï¸ LIGHT FROST
	Light = {
		Background = Color3.fromRGB(248, 248, 250),
		Topbar = Color3.fromRGB(235, 235, 240),
		Element = Color3.fromRGB(255, 255, 255),
		ElementHover = Color3.fromRGB(240, 240, 245),
		ElementActive = Color3.fromRGB(225, 225, 230),

		Text = Color3.fromRGB(25, 25, 30),
		TextSecondary = Color3.fromRGB(80, 80, 90),
		TextMuted = Color3.fromRGB(130, 130, 140),
		TextHover = Color3.fromRGB(0, 0, 0),

		Accent = Color3.fromRGB(10, 132, 255),
		AccentHover = Color3.fromRGB(0, 150, 255),
		Success = Color3.fromRGB(0, 180, 90),

		Stroke = Color3.fromRGB(210, 210, 220),
		StrokeHover = Color3.fromRGB(180, 180, 190),
		StrokeActive = Color3.fromRGB(0, 120, 215),

		TabBackground = Color3.fromRGB(245, 245, 250),
		TabText = Color3.fromRGB(35, 35, 40),
		TabHover = Color3.fromRGB(230, 230, 235),
		TabActive = Color3.fromRGB(10, 132, 255),
		Icon = Color3.fromRGB(60, 60, 70)
	},

	-- ðŸ’œ VIOLET DREAM
	Purple = {
		Background = Color3.fromRGB(28, 20, 35),
		Topbar = Color3.fromRGB(40, 28, 60),
		Element = Color3.fromRGB(55, 40, 80),
		ElementHover = Color3.fromRGB(75, 55, 105),
		ElementActive = Color3.fromRGB(45, 30, 70),

		Text = Color3.fromRGB(230, 220, 240),
		TextSecondary = Color3.fromRGB(190, 170, 210),
		TextMuted = Color3.fromRGB(150, 130, 170),
		TextHover = Color3.fromRGB(255, 240, 255),

		Accent = Color3.fromRGB(180, 100, 255),
		AccentHover = Color3.fromRGB(210, 130, 255),
		Success = Color3.fromRGB(130, 255, 180),

		Stroke = Color3.fromRGB(80, 60, 100),
		StrokeHover = Color3.fromRGB(110, 90, 130),
		StrokeActive = Color3.fromRGB(180, 100, 255),

		TabBackground = Color3.fromRGB(45, 30, 70),
		TabText = Color3.fromRGB(215, 190, 245),
		TabHover = Color3.fromRGB(70, 50, 95),
		TabActive = Color3.fromRGB(180, 100, 255),
		Icon = Color3.fromRGB(200, 180, 230)
	},

	-- ðŸ”µ CYBER BLUE
	Cyber = {
		Background = Color3.fromRGB(10, 14, 20),
		Topbar = Color3.fromRGB(15, 20, 28),
		Element = Color3.fromRGB(25, 32, 45),
		ElementHover = Color3.fromRGB(40, 50, 65),
		ElementActive = Color3.fromRGB(20, 25, 35),

		Text = Color3.fromRGB(220, 230, 255),
		TextSecondary = Color3.fromRGB(170, 180, 200),
		TextMuted = Color3.fromRGB(130, 140, 160),
		TextHover = Color3.fromRGB(255, 255, 255),

		Accent = Color3.fromRGB(0, 190, 255),
		AccentHover = Color3.fromRGB(0, 210, 255),
		Success = Color3.fromRGB(0, 255, 180),

		Stroke = Color3.fromRGB(35, 45, 60),
		StrokeHover = Color3.fromRGB(55, 65, 85),
		StrokeActive = Color3.fromRGB(0, 190, 255),

		TabBackground = Color3.fromRGB(15, 20, 28),
		TabText = Color3.fromRGB(180, 200, 220),
		TabHover = Color3.fromRGB(40, 50, 65),
		TabActive = Color3.fromRGB(0, 190, 255),
		Icon = Color3.fromRGB(170, 180, 200)
	},

	-- ðŸ§Š GLACIER BLUE
	Glacier = {
		Background = Color3.fromRGB(220, 230, 240),
		Topbar = Color3.fromRGB(200, 210, 225),
		Element = Color3.fromRGB(235, 240, 250),
		ElementHover = Color3.fromRGB(210, 225, 240),
		ElementActive = Color3.fromRGB(190, 210, 230),

		Text = Color3.fromRGB(35, 45, 55),
		TextSecondary = Color3.fromRGB(80, 95, 110),
		TextMuted = Color3.fromRGB(120, 135, 150),
		TextHover = Color3.fromRGB(10, 10, 10),

		Accent = Color3.fromRGB(0, 180, 255),
		AccentHover = Color3.fromRGB(0, 200, 255),
		Success = Color3.fromRGB(0, 180, 120),

		Stroke = Color3.fromRGB(180, 200, 220),
		StrokeHover = Color3.fromRGB(150, 170, 190),
		StrokeActive = Color3.fromRGB(0, 180, 255),

		TabBackground = Color3.fromRGB(210, 220, 230),
		TabText = Color3.fromRGB(30, 40, 55),
		TabHover = Color3.fromRGB(225, 235, 245),
		TabActive = Color3.fromRGB(0, 180, 255),
		Icon = Color3.fromRGB(70, 90, 110)
	},

	-- ðŸŸ¢ MINT PULSE
	Green = {
		Background = Color3.fromRGB(20, 30, 20),
		Topbar = Color3.fromRGB(30, 45, 30),
		Element = Color3.fromRGB(45, 60, 45),
		ElementHover = Color3.fromRGB(70, 90, 70),
		ElementActive = Color3.fromRGB(35, 45, 35),

		Text = Color3.fromRGB(220, 245, 220),
		TextSecondary = Color3.fromRGB(180, 205, 180),
		TextMuted = Color3.fromRGB(150, 170, 150),
		TextHover = Color3.fromRGB(240, 255, 240),

		Accent = Color3.fromRGB(80, 255, 120),
		AccentHover = Color3.fromRGB(100, 255, 140),
		Success = Color3.fromRGB(80, 255, 100),

		Stroke = Color3.fromRGB(70, 90, 70),
		StrokeHover = Color3.fromRGB(100, 120, 100),
		StrokeActive = Color3.fromRGB(80, 255, 120),

		TabBackground = Color3.fromRGB(30, 45, 30),
		TabText = Color3.fromRGB(200, 240, 200),
		TabHover = Color3.fromRGB(60, 85, 60),
		TabActive = Color3.fromRGB(80, 255, 120),
		Icon = Color3.fromRGB(180, 220, 180)
	},

	-- ðŸ”¥ CRIMSON VOID
	Crimson = {
		Background = Color3.fromRGB(25, 10, 15),
		Topbar = Color3.fromRGB(35, 15, 25),
		Element = Color3.fromRGB(50, 20, 30),
		ElementHover = Color3.fromRGB(75, 35, 50),
		ElementActive = Color3.fromRGB(40, 15, 25),

		Text = Color3.fromRGB(255, 220, 230),
		TextSecondary = Color3.fromRGB(200, 170, 180),
		TextMuted = Color3.fromRGB(150, 120, 130),
		TextHover = Color3.fromRGB(255, 240, 245),

		Accent = Color3.fromRGB(255, 70, 100),
		AccentHover = Color3.fromRGB(255, 100, 130),
		Success = Color3.fromRGB(255, 130, 160),

		Stroke = Color3.fromRGB(80, 40, 50),
		StrokeHover = Color3.fromRGB(110, 60, 70),
		StrokeActive = Color3.fromRGB(255, 70, 100),

		TabBackground = Color3.fromRGB(35, 15, 25),
		TabText = Color3.fromRGB(255, 180, 200),
		TabHover = Color3.fromRGB(70, 25, 40),
		TabActive = Color3.fromRGB(255, 70, 100),
		Icon = Color3.fromRGB(255, 180, 200)
	},

	-- ðŸŒ… SUNSET ORANGE
	Orange = {
		Background = Color3.fromRGB(30, 15, 10),
		Topbar = Color3.fromRGB(45, 20, 15),
		Element = Color3.fromRGB(60, 30, 20),
		ElementHover = Color3.fromRGB(85, 45, 35),
		ElementActive = Color3.fromRGB(40, 20, 15),

		Text = Color3.fromRGB(255, 220, 200),
		TextSecondary = Color3.fromRGB(210, 180, 160),
		TextMuted = Color3.fromRGB(150, 120, 100),
		TextHover = Color3.fromRGB(255, 240, 220),

		Accent = Color3.fromRGB(255, 120, 30),
		AccentHover = Color3.fromRGB(255, 150, 50),
		Success = Color3.fromRGB(255, 200, 60),

		Stroke = Color3.fromRGB(90, 45, 25),
		StrokeHover = Color3.fromRGB(120, 60, 35),
		StrokeActive = Color3.fromRGB(255, 120, 30),

		TabBackground = Color3.fromRGB(45, 20, 15),
		TabText = Color3.fromRGB(255, 180, 140),
		TabHover = Color3.fromRGB(70, 30, 20),
		TabActive = Color3.fromRGB(255, 120, 30),
		Icon = Color3.fromRGB(255, 160, 120)
	},

	-- ðŸŒŠ OCEAN WAVE
	Ocean = {
		Background = Color3.fromRGB(10, 25, 35),
		Topbar = Color3.fromRGB(15, 35, 50),
		Element = Color3.fromRGB(25, 50, 70),
		ElementHover = Color3.fromRGB(40, 70, 95),
		ElementActive = Color3.fromRGB(15, 35, 50),

		Text = Color3.fromRGB(200, 235, 245),
		TextSecondary = Color3.fromRGB(160, 190, 210),
		TextMuted = Color3.fromRGB(120, 140, 160),
		TextHover = Color3.fromRGB(255, 255, 255),

		Accent = Color3.fromRGB(0, 170, 255),
		AccentHover = Color3.fromRGB(0, 200, 255),
		Success = Color3.fromRGB(0, 255, 180),

		Stroke = Color3.fromRGB(40, 60, 80),
		StrokeHover = Color3.fromRGB(70, 90, 110),
		StrokeActive = Color3.fromRGB(0, 170, 255),

		TabBackground = Color3.fromRGB(15, 35, 50),
		TabText = Color3.fromRGB(180, 220, 240),
		TabHover = Color3.fromRGB(40, 70, 95),
		TabActive = Color3.fromRGB(0, 170, 255),
		Icon = Color3.fromRGB(160, 200, 220)
	}
}



Library.CurrentTheme = "Dark"
Library.ThemeObjects = {}
Library.Themes = Library.Themes or {}

function Library:SetTheme(themeName)
	if self.Themes[themeName] then
		self.CurrentTheme = themeName
		self:ApplyTheme(true) -- true enables smooth transition
		return true
	else
		warn("[Theme] Theme '" .. tostring(themeName) .. "' not found!")
		return false
	end
end

function Library:GetTheme()
	return self.CurrentTheme, self.Themes[self.CurrentTheme]
end

function Library:GetThemes()
	local themeNames = {}
	for name in pairs(self.Themes) do
		table.insert(themeNames, name)
	end
	return themeNames
end

function Library:AddTheme(name, themeData)
	if type(themeData) == "table" then
		self.Themes[name] = themeData
		return true
	else
		warn("[Theme] Invalid theme data for '" .. tostring(name) .. "'")
		return false
	end
end

function Library:ApplyTheme(animated)
	local theme = self.Themes[self.CurrentTheme]
	if not theme then
		warn("[Theme] No theme data found for:", self.CurrentTheme)
		return
	end

	for object, properties in pairs(self.ThemeObjects) do
		if object and object.Parent then
			for property, themeKey in pairs(properties) do
				local newColor = theme[themeKey]
				if newColor then
					if animated and typeof(object[property]) == "Color3" then
						task.spawn(function()
							game:GetService("TweenService"):Create(
								object,
								TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
								{[property] = newColor}
							):Play()
						end)
					else
						object[property] = newColor
					end
				end
			end
		else
			self.ThemeObjects[object] = nil
		end
	end
end

function Library:RegisterObject(object, properties)
	if not object or not properties then return end
	self.ThemeObjects[object] = properties
	local theme = self.Themes[self.CurrentTheme]
	if not theme then return end

	for property, themeKey in pairs(properties) do
		local color = theme[themeKey]
		if color then
			object[property] = color
		end
	end
end

function Library:GetThemeColor(prop)
	local theme = self.Themes[self.CurrentTheme]
	return (theme and theme[prop]) or Color3.fromRGB(255, 255, 255)
end




function Library:Create(xHubName, themeName)


	if  game.Players.LocalPlayer.PlayerGui:FindFirstChild(xHubName) then
		 game.Players.LocalPlayer.PlayerGui[xHubName]:Destroy()
	end

	local xHubName = xHubName or "Seraph Hub"
	if themeName and self.Themes[themeName] then
		self.CurrentTheme = themeName
	end

	local currentTheme = self.Themes[self.CurrentTheme]
	
	
	local ScreenGui = Instance.new("ScreenGui")
	local Menu = Instance.new("Frame")
	local UICorner = Instance.new("UICorner")
	local Topbar = Instance.new("Frame")
	local UICorner_2 = Instance.new("UICorner")
	local Title = Instance.new("TextLabel")
	local UIPadding = Instance.new("UIPadding")
	local Minimize = Instance.new("TextButton")
	local UICorner_3 = Instance.new("UICorner")
	local ImageLabel = Instance.new("ImageLabel")
	local UIScale = Instance.new("UIScale")
	local Close = Instance.new("TextButton")
	local UICorner_4 = Instance.new("UICorner")
	local ImageLabel_2 = Instance.new("ImageLabel")
	local UIScale_2 = Instance.new("UIScale")
	local TabHold = Instance.new("Frame")
	local Holder2 = Instance.new("ScrollingFrame")
	local UIListLayout = Instance.new("UIListLayout")
	local UIPadding_2 = Instance.new("UIPadding")
	local ExampleContainer = Instance.new("Frame")
	local PageHold = Instance.new("Folder")

	--load
	local LoadingFrame = Instance.new("Frame")
	local LoadingLabel = Instance.new("TextLabel")
	local LoadingImage = Instance.new("ImageLabel")
	local ProgressBar = Instance.new("Frame")
	local ProgressBackground = Instance.new("Frame")



	local UIStroke = Instance.new("UIStroke")

	UIStroke.Parent = Menu
	UIStroke.Color = Color3.fromRGB(50, 50, 50)
	UIStroke.Thickness = 2

	--close and open mobile

	local ImageButtonK = Instance.new("ImageButton")
	local ImageButtonKCorner = Instance.new("UICorner")

	function ScrollSize()
		local padding = Holder2.UIPadding.PaddingTop.Offset or 0
		Holder2.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + padding)
	end

	--Properties:
	ScreenGui.Name = xHubName
	ScreenGui.Parent =  game.Players.LocalPlayer.PlayerGui
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

	Library:Drag(Menu, Topbar)
	Library:Drag(ImageButtonK)

	local originalSize = UDim2.new(0, 525, 0, 318)
	local minimizedSize = UDim2.new(0, 525, 0, 36)

	LoadingFrame.Name = "LoadingFrame"
	LoadingFrame.Parent = ScreenGui
	LoadingFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	LoadingFrame.BackgroundTransparency = 0.5
	LoadingFrame.Size = UDim2.new(1, 0, 1, 0)

	LoadingLabel.Name = "LoadingLabel"
	LoadingLabel.Parent = LoadingFrame
	LoadingLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	LoadingLabel.BackgroundTransparency = 1.000
	LoadingLabel.Position = UDim2.new(0.5, -100, 0.5, -50)
	LoadingLabel.Size = UDim2.new(0, 200, 0, 50)
	LoadingLabel.Font = Enum.Font.GothamBold
	LoadingLabel.Text = "Loading."
	LoadingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	LoadingLabel.TextSize = 24.000

	LoadingImage.Name = "LoadingImage"
	LoadingImage.Parent = LoadingFrame
	LoadingImage.BackgroundTransparency = 1.000
	LoadingImage.Position = UDim2.new(0.5, -25, 0.4, -75)
	LoadingImage.Size = UDim2.new(0, 50, 0, 50)
	LoadingImage.Image = "rbxassetid://9559111831"

	ProgressBackground.Name = "ProgressBackground"
	ProgressBackground.Parent = LoadingFrame
	ProgressBackground.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	ProgressBackground.Position = UDim2.new(0.5, -100, 0.6, -10)
	ProgressBackground.Size = UDim2.new(0, 200, 0, 20)

	ProgressBar.Name = "ProgressBar"
	ProgressBar.Parent = ProgressBackground
	ProgressBar.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
	ProgressBar.Size = UDim2.new(0, 0, 1, 0)

	local Loadcorn = Instance.new("UICorner")

	Loadcorn.CornerRadius = UDim.new(0, 5)
	Loadcorn.Parent = ProgressBar

	Loadcorn:Clone().Parent = ProgressBackground
	Loadcorn:Clone().Parent = LoadingLabel
	Loadcorn:Clone().Parent = LoadingFrame


	UIStroke:Clone().Parent = LoadingImage
	UIStroke:Clone().Parent = LoadingLabel
	UIStroke:Clone().Parent = ProgressBar
	
	
	-- After creating each UI element, register it for theme support
	self:RegisterObject(Menu, {BackgroundColor3 = "Background"})
	self:RegisterObject(Topbar, {BackgroundColor3 = "Topbar"})
	self:RegisterObject(Title, {TextColor3 = "Text"})
	self:RegisterObject(Minimize, {BackgroundColor3 = "Element", TextColor3 = "Text"})
	self:RegisterObject(Close, {BackgroundColor3 = "Element", TextColor3 = "Text"})
	self:RegisterObject(ImageLabel, {ImageColor3 = "Accent"})
	self:RegisterObject(ImageLabel_2, {ImageColor3 = "Accent"})
	self:RegisterObject(TabHold, {BackgroundColor3 = "Background"})
	self:RegisterObject(Holder2, {BackgroundColor3 = "Element"})
	self:RegisterObject(UIListLayout, {}) -- no color needed
	self:RegisterObject(UIPadding_2, {}) -- no color needed
	self:RegisterObject(ExampleContainer, {BackgroundColor3 = "Element"})
	self:RegisterObject(PageHold, {}) -- folder, no color needed
	
	
	-- Register loading UI elements for theme support
	if LoadingFrame then
		self:RegisterObject(LoadingFrame, {BackgroundColor3 = "Background"})
	end

	if LoadingLabel then
		self:RegisterObject(LoadingLabel, {TextColor3 = "Text"})
	end

	if ProgressBackground then
		self:RegisterObject(ProgressBackground, {BackgroundColor3 = "Element"})
	end

	if ProgressBar then
		self:RegisterObject(ProgressBar, {BackgroundColor3 = "Accent"})
	end

	
	

	local function cycleLoadingText()
		local textArray = {"Loading.", "Loading..", "Loading..."}
		local index = 1
		while LoadingFrame.Parent do
			LoadingLabel.Text = textArray[index]
			index = index % #textArray + 1
			task.wait(0.5)
		end
	end

	local function animateProgressBar()
		for i = 1, 100 do
			ProgressBar.Size = UDim2.new(i / 100, 0, 1, 0)
			task.wait(0.04)
		end
	end

	local textCoroutine = coroutine.create(cycleLoadingText)
	local progressCoroutine = coroutine.create(animateProgressBar)

	coroutine.resume(textCoroutine)
	coroutine.resume(progressCoroutine)

	local rotationTween = Animations.Rotate(LoadingImage, 360, 0.5, true)

	rotationTween:Cancel()
	LoadingImage.Rotation = 0  

	wait(4)

	if LoadingFrame and LoadingFrame.Parent then
		Animations.FadeOut(LoadingFrame, 0.3)
		wait(1)
		LoadingFrame:Destroy()
		--	Menu:TweenSize(originalSize, Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.3, true)

	else
		return
			print("Can't open the main gui cuz loading is visible :)")
	end



	Menu.Name = "Menu"
	Menu.Parent = ScreenGui
	Menu.BackgroundColor3 = Color3.fromRGB(29, 29, 29)
	Menu.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Menu.Position = UDim2.new(0.336060435, 0, 0.211180121, 0) --0.336060435, 0, 0.211180121, 0
	Menu.Size = minimizedSize
	for _, child in ipairs(Menu:GetChildren()) do
		if (child:IsA("Frame") or child:IsA("ScrollingFrame")) and child.Name ~= "Topbar" then
			child.Visible = false
		end
	end

	--	local TweenService = game:GetService("TweenService")

	-- hide all content-frames except Topbar
	for _, child in ipairs(Menu:GetChildren()) do
		if (child:IsA("Frame") or child:IsA("ScrollingFrame")) and child.Name ~= "Topbar" then
			child.Visible = false
		end
	end

	-- prepare tween to expand Menu
	local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
	local tween = TweenService:Create(Menu, tweenInfo, {Size = originalSize})
	tween:Play()

	-- when expansion finishes, show children
	tween.Completed:Connect(function()
		for _, child in ipairs(Menu:GetChildren()) do
			if (child:IsA("Frame") or child:IsA("ScrollingFrame")) and child.Name ~= "Topbar" then
				child.Visible = true
			end
		end
	end)

	UICorner.CornerRadius = UDim.new(0, 5)
	UICorner.Parent = Menu


	Topbar.Name = "Topbar"
	Topbar.Parent = Menu
	Topbar.BackgroundColor3 = Color3.fromRGB(33, 33, 33)
	Topbar.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Topbar.Size = UDim2.new(0, 525, 0, 36)

	UICorner_2.CornerRadius = UDim.new(0, 5)
	UICorner_2.Parent = Topbar

	Title.Name = "Title"
	Title.Parent = Topbar
	Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Title.BackgroundTransparency = 1.000
	Title.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Title.Position = UDim2.new(0.00192678231, 0, 0, 0)
	Title.Size = UDim2.new(0, 200, 0, 36)
	Title.Font = Enum.Font.GothamMedium
	Title.Text = xHubName
	Title.TextColor3 = Color3.fromRGB(161, 161, 161)
	Title.TextSize = 13.000
	Title.TextXAlignment = Enum.TextXAlignment.Left

	UIPadding.Parent = Title
	UIPadding.PaddingLeft = UDim.new(0, 10)

	Minimize.Name = "Minimize"
	Minimize.Parent = Topbar
	Minimize.BackgroundColor3 = Color3.fromRGB(248, 248, 248)
	Minimize.BackgroundTransparency = 1.000
	Minimize.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Minimize.Position = UDim2.new(0.892100215, 0, 0.194444448, 0)
	Minimize.Selectable = false
	Minimize.Size = UDim2.new(0, 21, 0, 21)
	Minimize.Text = ""
	Minimize.TextTransparency = 1.000

	UICorner_3.CornerRadius = UDim.new(0, 4)
	UICorner_3.Parent = Minimize

	ImageLabel.Parent = Minimize
	ImageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
	ImageLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	ImageLabel.BackgroundTransparency = 1.000
	ImageLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
	ImageLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
	ImageLabel.Size = UDim2.new(0, 21, 0, 21)
	ImageLabel.Image = "rbxassetid://7733997870"
	ImageLabel.ImageColor3 = Color3.fromRGB(134, 134, 134)

	UIScale.Parent = ImageLabel
	UIScale.Scale = 0.600

	Close.Name = "Close"
	Close.Parent = Topbar
	Close.BackgroundColor3 = Color3.fromRGB(248, 248, 248)
	Close.BackgroundTransparency = 1.000
	Close.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Close.Position = UDim2.new(0.940269768, 0, 0.194444448, 0)
	Close.Selectable = false
	Close.Size = UDim2.new(0, 21, 0, 21)
	Close.Text = ""
	Close.TextTransparency = 1.000


	UICorner_4.CornerRadius = UDim.new(0, 4)
	UICorner_4.Parent = Close

	ImageLabel_2.Parent = Close
	ImageLabel_2.AnchorPoint = Vector2.new(0.5, 0.5)
	ImageLabel_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	ImageLabel_2.BackgroundTransparency = 1.000
	ImageLabel_2.BorderColor3 = Color3.fromRGB(27, 42, 53)
	ImageLabel_2.Position = UDim2.new(0.5, 0, 0.5, 0)
	ImageLabel_2.Size = UDim2.new(0, 21, 0, 21)
	ImageLabel_2.Image = "rbxassetid://7743878857"
	ImageLabel_2.ImageColor3 = Color3.fromRGB(134, 134, 134)

	UIScale_2.Parent = ImageLabel_2
	UIScale_2.Scale = 0.700


	TabHold.Name = "TabHold"
	TabHold.Parent = Menu
	TabHold.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	TabHold.BackgroundTransparency = 1.000
	TabHold.BorderColor3 = Color3.fromRGB(0, 0, 0)
	TabHold.BorderSizePixel = 0
	TabHold.Position = UDim2.new(0.00190476188, 0, 0.113207549, 0)
	TabHold.Size = UDim2.new(0, 218, 0, 282)


	Holder2.Name = "Holder"
	Holder2.Parent = TabHold
	Holder2.Active = true
	Holder2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Holder2.BackgroundTransparency = 1.000
	Holder2.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Holder2.Size = UDim2.new(1, 0, 0.996453881, 1)
	Holder2.ZIndex = 3
	Holder2.ScrollBarThickness = 0

	UIListLayout.Parent = Holder2
	UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayout.Padding = UDim.new(0, 6)

	UIPadding_2.Parent = Holder2
	UIPadding_2.PaddingTop = UDim.new(0, 10)


	ExampleContainer.Name = "ExampleContainer"
	ExampleContainer.Parent = Menu
	ExampleContainer.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	ExampleContainer.BackgroundTransparency = 1.000
	ExampleContainer.BorderColor3 = Color3.fromRGB(27, 42, 53)
	ExampleContainer.Position = UDim2.new(0.425714284, 0, 0.113207549, 0)
	ExampleContainer.Size = UDim2.new(0, 300, 0, 280)

	PageHold.Name = "PageHold"
	PageHold.Parent = ExampleContainer




	UIStroke:Clone().Parent = Topbar
	UIStroke:Clone().Parent = TabHold
	UIStroke:Clone().Parent = ExampleContainer

	--local UIGradient = Instance.new("UIGradient")
	--UIGradient.Color = ColorSequence.new{
	--	ColorSequenceKeypoint.new(0.00, Color3.fromRGB(40, 40, 40)),
	--	ColorSequenceKeypoint.new(1.00, Color3.fromRGB(20, 20, 20))
--	}
--	UIGradient.Parent = Menu
	
	
	
	local Shadow = Instance.new("Frame")
	local Image = Instance.new("ImageLabel")

	--Properties:

	Shadow.Name = "Shadow"
	Shadow.Parent = Menu
	Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
	Shadow.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Shadow.BackgroundTransparency = 1.000
	Shadow.BorderColor3 = Color3.fromRGB(23, 36, 45)
	Shadow.BorderSizePixel = 0
	Shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
	Shadow.Size = UDim2.new(1, 35, 1, 35)
	Shadow.ZIndex = 0

	Image.Name = "Image"
	Image.Parent = Shadow
	Image.AnchorPoint = Vector2.new(0.5, 0.5)
	Image.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Image.BackgroundTransparency = 1.000
	Image.BorderColor3 = Color3.fromRGB(27, 42, 53)
	Image.BorderSizePixel = 0
	Image.Position = UDim2.new(0.507476628, 0, 0.509803951, 0)
	Image.Size = UDim2.new(1.60000002, 0, 1.29999995, 0)
	Image.ZIndex = 0
	Image.Image = "rbxassetid://5587865193"
	Image.ImageColor3 = Color3.fromRGB(20, 20, 20)
	Image.ImageTransparency = 0.400



	-- ImageButtonK setup
	ImageButtonK.Name = "ImageButtonK"
	ImageButtonK.Parent = ScreenGui
	ImageButtonK.BackgroundColor3 = Color3.fromRGB(255, 16, 8)
	--	ImageButtonK.BackgroundTransparency = 1.000
	ImageButtonK.BorderColor3 = Color3.fromRGB(0, 0, 0)
	ImageButtonK.BorderSizePixel = 0
	ImageButtonK.Position = UDim2.new(0.219957083, 0, 0.0619834736, 0)
	ImageButtonK.Size = UDim2.new(0.044799991, 0, 0.0651629046, 0)
	ImageButtonK.Image = "rbxassetid://18786441248"
	ImageButtonK.ZIndex = 10
	ImageButtonK.Visible = true

	-- UICorner for ImageButtonK setup
	local ImageButtonKCorner = Instance.new("UICorner")
	ImageButtonKCorner.CornerRadius = UDim.new(0, 12)
	ImageButtonKCorner.Name = "ImageButtonKCorner"
	ImageButtonKCorner.Parent = ImageButtonK

	-- UIAspectRatioConstraint for ImageButtonK setup
	local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
	UIAspectRatioConstraint.Parent = ImageButtonK
	UIAspectRatioConstraint.AspectRatio = 1.404
	
	
	
	-- Register ALL main UI elements
	if Menu then
		self:RegisterObject(Menu, {BackgroundColor3 = "Background"})
	end

	if Topbar then
		self:RegisterObject(Topbar, {BackgroundColor3 = "Topbar"})
	end

	if Title then
		self:RegisterObject(Title, {TextColor3 = "TextSecondary"})
	end

	if ImageLabel then
		self:RegisterObject(ImageLabel, {ImageColor3 = "TextSecondary"})
	end

	if ImageLabel_2 then
		self:RegisterObject(ImageLabel_2, {ImageColor3 = "TextSecondary"})
	end

	if UIStroke then
		self:RegisterObject(UIStroke, {Color = "Stroke"})
	end

	if TabHold then
		self:RegisterObject(TabHold, {BackgroundColor3 = "Background"})
	end

	if ExampleContainer then
		self:RegisterObject(ExampleContainer, {BackgroundColor3 = "Background"})
	end

	if ImageButtonK then
		self:RegisterObject(ImageButtonK, {BackgroundColor3 = "Accent"})
	end

	-- Register Minimize and Close buttons
	if Minimize then
		self:RegisterObject(Minimize, {BackgroundColor3 = "Element"})
	end

	if Close then
		self:RegisterObject(Close, {BackgroundColor3 = "Element"})
	end

	-- Register Holder2 (tab scrolling frame)
	if Holder2 then
		self:RegisterObject(Holder2, {BackgroundColor3 = "Background"})
	end

	-- Register Shadow elements
	--if Shadow then
	--	self:RegisterObject(Shadow, {BackgroundColor3 = "Background"})
	--end

	if Image then
		self:RegisterObject(Image, {ImageColor3 = "Background"})
	end

	-- Register loading screen elements
	if LoadingFrame then
		self:RegisterObject(LoadingFrame, {BackgroundColor3 = "Background"})
	end

	if LoadingLabel then
		self:RegisterObject(LoadingLabel, {TextColor3 = "Text"})
	end

	if ProgressBackground then
		self:RegisterObject(ProgressBackground, {BackgroundColor3 = "Element"})
	end

	if ProgressBar then
		self:RegisterObject(ProgressBar, {BackgroundColor3 = "Accent"})
	end

	-- Register all UIStrokes that were cloned
	for _, child in ipairs(Topbar:GetChildren()) do
		if child:IsA("UIStroke") then
			self:RegisterObject(child, {Color = "Stroke"})
		end
	end

	for _, child in ipairs(TabHold:GetChildren()) do
		if child:IsA("UIStroke") then
			self:RegisterObject(child, {Color = "Stroke"})
		end
	end

	for _, child in ipairs(ExampleContainer:GetChildren()) do
		if child:IsA("UIStroke") then
			self:RegisterObject(child, {Color = "Stroke"})
		end
	end

	-- Register loading screen UIStrokes
	for _, child in ipairs(LoadingImage:GetChildren()) do
		if child:IsA("UIStroke") then
			self:RegisterObject(child, {Color = "Stroke"})
		end
	end

	for _, child in ipairs(LoadingLabel:GetChildren()) do
		if child:IsA("UIStroke") then
			self:RegisterObject(child, {Color = "Stroke"})
		end
	end

	for _, child in ipairs(ProgressBar:GetChildren()) do
		if child:IsA("UIStroke") then
			self:RegisterObject(child, {Color = "Stroke"})
		end
	end
	
	--[[
	-- Register UIGradient with theme colors
	if UIGradient then
		-- Update gradient colors based on theme
		local function updateGradient()
			local theme = self.Themes[self.CurrentTheme]
			UIGradient.Color = ColorSequence.new{
				ColorSequenceKeypoint.new(0.00, theme.Background),
				ColorSequenceKeypoint.new(1.00, theme.Element)
			}
		end
		updateGradient()
		-- Re-update when theme changes
		table.insert(self.ThemeChangeCallbacks, updateGradient)
	end
	]]
	
	
	
	
	
	
	--local originalSize = Menu.Size
	--local minimizedSize = UDim2.new(0, 525, 0, 36)
	local minimized = false

	Minimize.MouseButton1Click:Connect(function()
		local duration = 0.3
		local easing = Enum.EasingStyle.Quad
		local direction = Enum.EasingDirection.Out

		if minimized then
			-- Restore menu size
			TweenService:Create(Menu, TweenInfo.new(duration, easing, direction), {Size = originalSize}):Play()

			for _, child in pairs(Menu:GetChildren()) do
				if (child:IsA("Frame") or child:IsA("ScrollingFrame")) and child.Name ~= "Topbar" then
					child.Visible = true
				end
			end

			ImageLabel.Image = "rbxassetid://7733997870"
			TweenService:Create(ImageLabel, TweenInfo.new(duration, easing, direction), {Rotation = 0, ImageTransparency = 0}):Play()
		else
			-- Minimize menu
			TweenService:Create(Menu, TweenInfo.new(duration, easing, direction), {Size = minimizedSize}):Play()

			for _, child in pairs(Menu:GetChildren()) do
				if (child:IsA("Frame") or child:IsA("ScrollingFrame")) and child.Name ~= "Topbar" then
					child.Visible = false
				end
			end

			ImageLabel.Image = "rbxassetid://6153965696"
			TweenService:Create(ImageLabel, TweenInfo.new(duration, easing, direction), {Rotation = 90, ImageTransparency = 0.2}):Play()
		end

		minimized = not minimized
	end)




	local TweenService = game:GetService("TweenService")

	local function playTween(element, properties, duration, easing, direction, onComplete)
		easing = easing or Enum.EasingStyle.Quad
		direction = direction or Enum.EasingDirection.Out
		local tween = TweenService:Create(element, TweenInfo.new(duration, easing, direction), properties)
		tween:Play()
		if onComplete then
			tween.Completed:Connect(onComplete)
		end
		return tween
	end

	local function playTweenMultiple(elements, properties, duration, easing, direction, onComplete)
		local tweens = {}
		local completedCount = 0
		local total = #elements
		local function checkComplete()
			completedCount = completedCount + 1
			if completedCount >= total and onComplete then
				onComplete()
			end
		end

		for _, element in ipairs(elements) do
			table.insert(tweens, playTween(element, properties, duration, easing, direction, checkComplete))
		end
		return tweens
	end


	local activeTween = nil
	local CloseACTween = nil

	Close.MouseButton1Click:Connect(function()
		if CloseACTween then
			for _, tween in ipairs(CloseACTween) do
				tween:Cancel()
			end
		end

		local ui =  game.Players.LocalPlayer.PlayerGui:FindFirstChild(xHubName)
		if not ui then
			warn("UI not found: " .. tostring(xHubName))
			return
		end

		if Menu.Visible then
			CloseACTween = playTweenMultiple({Menu, Topbar, Shadow}, {BackgroundTransparency = 1}, 0.3, nil, nil, function()
				ui:Destroy() -- Destroy AFTER fade-out finishes
			end)
		end
	end)


	-- Toggle menu logic
	local activeTween = nil

	ImageButtonK.MouseButton1Click:Connect(function()
		if activeTween then
			for _, tween in ipairs(activeTween) do
				tween:Cancel()
			end
		end

		if Menu.Visible then
			activeTween = playTweenMultiple({Menu, Topbar}, {BackgroundTransparency = 1}, 0.3, nil, nil, function()
				Menu.Visible = false
			end)
		else
			Menu.Visible = true
			Menu.BackgroundTransparency = 1
			Topbar.BackgroundTransparency = 1

			-- âœ… Wait until the next render frame so it becomes visible before tween starts
			game:GetService("RunService").RenderStepped:Wait()

			activeTween = playTweenMultiple({Menu, Topbar}, {BackgroundTransparency = 0}, 0.3)
		end
	end)




	function Library:ToggleUI()
		local ui =  game.Players.LocalPlayer.PlayerGui:FindFirstChild(xHubName)

		if not ui then
			warn("UI not found: " .. tostring(xHubName))
			return false
		end

		local wasEnabled = ui.Enabled
		ui.Enabled = not ui.Enabled

		if ui.Enabled and not wasEnabled and Menu and Menu.Parent then
			Menu.Visible = true
			Library:Tween(Menu, {BackgroundTransparency = 0}, 0.2)
			Library:Tween(Topbar, {BackgroundTransparency = 0}, 0.2)

			if ImageButtonK and ImageButtonK.Parent then
				Library:GlowEffect(ImageButtonK, Color3.fromRGB(0, 170, 255), 0.5)
			end
		elseif not ui.Enabled and wasEnabled and Menu and Menu.Parent then
			Library:Tween(Menu, {BackgroundTransparency = 1}, 0.2)
			Library:Tween(Topbar, {BackgroundTransparency = 1}, 0.2)

			task.delay(0.25, function()
				if Menu and not ui.Enabled then
					Menu.Visible = false
				end
			end)
		end

		return ui.Enabled
	end



	function Library:Destroy()
		local ui =  game.Players.LocalPlayer.PlayerGui:FindFirstChild(xHubName)
		if ui then
			if Menu and Menu.Parent then
				Library:Tween(Menu, {BackgroundTransparency = 1}, 0.3)
			end
			if Topbar and Topbar.Parent then
				Library:Tween(Topbar, {BackgroundTransparency = 1}, 0.3)
			end
			if Shadow and Shadow.Parent then
				Library:Tween(Shadow, {BackgroundTransparency = 1}, 0.3)
			end

			task.delay(0.35, function()
				ui:Destroy()
			end)
		else
			warn("UI not found: " .. tostring(xHubName))
		end
	end

	function Library:AddThemeSelector(tab)
		local themeNames = self:GetThemes()

		local themeDropdown = self:Dropdown(tab, "Theme", themeNames, function(selected)
			self:SetTheme(selected)
		end)

		-- Set current theme as default
		themeDropdown:Setdrop(self.CurrentTheme)

		return themeDropdown
	end
	
	
	
	function Library:Tab(TabNam, TabIcon)
		local TabNam = TabNam or "Tab"
		local TabIcon = TabIcon 
		local activeTab = nil
		
		
		--Tab button

		local Example = Instance.new("TextButton")
		local UICorner = Instance.new("UICorner")
		local TabTitle = Instance.new("TextLabel")
		local IconImage = Instance.new("ImageLabel")

		--Properties:

		Example.Name = TabNam
		Example.Parent = Holder2
		Example.BackgroundColor3 = Library:GetThemeColor("TabBackground")
		Example.BorderColor3 = Color3.fromRGB(27, 42, 53)
		Example.Position = UDim2.new(0.105504587, 0, 0, 0)
		Example.Selectable = false
		Example.Size = UDim2.new(0, 201, 0, 31)
		Example.ZIndex = 6
		Example.AutoButtonColor = false
		Example.TextWrapped = true     
		Example.Text = ""
		
		
		UICorner.CornerRadius = UDim.new(0, 5)
		UICorner.Parent = Example

		TabTitle.Parent = Example
		TabTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		TabTitle.BackgroundTransparency = 1.000
		TabTitle.BorderColor3 = Color3.fromRGB(27, 42, 53)
		TabTitle.Position = UDim2.new(0.0945273638, 0, 0, 0)
		TabTitle.Size = UDim2.new(1, -40, 1, 0)
		TabTitle.ZIndex = 7
		TabTitle.Font = Enum.Font.GothamMedium
		TabTitle.Text = TabNam
		TabTitle.TextColor3 = Library:GetThemeColor("TabText")
		TabTitle.TextSize = 12.000
		
		IconImage.Name = "Icon"
		IconImage.Parent = Example
		IconImage.BackgroundTransparency = 1
		IconImage.Size = UDim2.new(0, 16, 0, 16)
		IconImage.Position = UDim2.new(1, -26, 0.5, -8) -- right side of button
		IconImage.Image = TabIcon or "" -- allow nil icon
		IconImage.ImageColor3 = Library:GetThemeColor("TabText")
		
		
		-- Gui to Lua
		-- Version: 3.2

		-- Instances:

		local Left = Instance.new("ScrollingFrame")
		local UIListLayout = Instance.new("UIListLayout")
		local ExampleSection = Instance.new("Frame")
		local Title = Instance.new("Frame")
		local TextLabel = Instance.new("TextLabel")
		local UIListLayout_2 = Instance.new("UIListLayout")
		local UIPadding = Instance.new("UIPadding")
		local Holder = Instance.new("Frame")
		local UIListLayout_3 = Instance.new("UIListLayout")
		local UIPadding_2 = Instance.new("UIPadding")


		ScrollSize()

		function Size()
			Left.CanvasSize = UDim2.new(0, 0, 0, (UIListLayout.AbsoluteContentSize.Y + UIListLayout_2.AbsoluteContentSize.Y + UIListLayout_3.AbsoluteContentSize.Y))
		end


		--Properties:


		Left.Name = TabNam
		Left.Parent = PageHold
		Left.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Left.BackgroundTransparency = 1.000
		Left.BorderColor3 = Color3.fromRGB(27, 42, 53)
		Left.Size = UDim2.new(0, 301, 0, 282)
		Left.Visible = false
		Left.ScrollBarThickness = 0

		UIListLayout.Parent = Left
		UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

		ExampleSection.Name = "Section"
		ExampleSection.Parent = Left
		ExampleSection.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		ExampleSection.BackgroundTransparency = 1.000
		ExampleSection.BorderColor3 = Color3.fromRGB(27, 42, 53)
		ExampleSection.Size = UDim2.new(0, 301, 0, 277)

		Title.Name = "Title"
		Title.Parent = ExampleSection
		Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Title.BackgroundTransparency = 1.000
		Title.BorderColor3 = Color3.fromRGB(27, 42, 53)
		Title.LayoutOrder = -1
		Title.Size = UDim2.new(0, 255, 0, 29)

		TextLabel.Parent = Title
		TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		TextLabel.BackgroundTransparency = 1.000
		TextLabel.BorderColor3 = Color3.fromRGB(27, 42, 53)
		TextLabel.Size = UDim2.new(0, 255, 0, 34)
		TextLabel.Font = Enum.Font.Gotham
		TextLabel.Text = TabNam
		TextLabel.TextColor3 = Color3.fromRGB(130, 130, 130)
		TextLabel.TextSize = 12.000
		TextLabel.TextXAlignment = Enum.TextXAlignment.Left

		UIListLayout_2.Parent = ExampleSection
		UIListLayout_2.SortOrder = Enum.SortOrder.LayoutOrder

		UIPadding.Parent = ExampleSection
		UIPadding.PaddingLeft = UDim.new(0, 20)

		Holder.Name = "Holder"
		Holder.Parent = ExampleSection
		Holder.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Holder.BackgroundTransparency = 1.000
		Holder.BorderColor3 = Color3.fromRGB(27, 42, 53)
		Holder.Position = UDim2.new(-0.00355871883, 0, 0.104693137, 0)
		Holder.Size = UDim2.new(1.01067615, 0, 0.870036125, 0)

		UIListLayout_3.Parent = Holder
		UIListLayout_3.SortOrder = Enum.SortOrder.LayoutOrder
		UIListLayout_3.Padding = UDim.new(0, 5)

		UIPadding_2.Parent = Left
		UIPadding_2.PaddingTop = UDim.new(0, 5)


		Size()
		Holder.ChildAdded:Connect(Size)
		Holder.ChildRemoved:Connect(Size)
		
		-- Register the main tab button
		self:RegisterObject(Example, {BackgroundColor3 = "Element"})
		self:RegisterObject(TextLabel, {TextColor3 = "Text"})
		self:RegisterObject(TabTitle, {TextColor3 = "TabText"})

		self:RegisterObject(UIStroke, {Color = "Stroke"})
		
		
		-- Register the tab frame
		self:RegisterObject(Left, {BackgroundColor3 = "Background"})
		self:RegisterObject(ExampleSection, {BackgroundColor3 = "TabBackground"})
		self:RegisterObject(Title, {BackgroundColor3 = "TabText"})
		self:RegisterObject(TextLabel, {TextColor3 = "TextMuted"})
		self:RegisterObject(TabTitle, {TextColor3 = "TabText"})

		self:RegisterObject(Holder, {BackgroundColor3 = "Background"})

		
		Example.MouseEnter:Connect(function()
			local _, theme = Library:GetTheme()
			if activeTab ~= Example then
				Library:Tween(Example, {BackgroundColor3 = theme.TabHover}, 0.15)
				Library:Tween(TextLabel, {TextColor3 = theme.TabText}, 0.15)
				Library:Tween(TabTitle, {TextColor3 = theme.TabText}, 0.15)

				Library:Tween(IconImage, {ImageColor3 = theme.TabText}, 0.15)
				Library:Tween(UIStroke, {Color = theme.StrokeHover}, 0.15)
			end
		end)
		
		
		Example.MouseLeave:Connect(function()
			local _, theme = Library:GetTheme()
			if activeTab ~= Example then
				Library:Tween(Example, {BackgroundColor3 = theme.TabBackground}, 0.15)
				Library:Tween(TextLabel, {TextColor3 = theme.TabText}, 0.15)
				Library:Tween(TabTitle, {TextColor3 = theme.TabText}, 0.15)

				Library:Tween(IconImage, {ImageColor3 = theme.TabText}, 0.15)
				Library:Tween(UIStroke, {Color = theme.Stroke}, 0.15)
			end
		end)


		local originalBackgroundColor = Example.BackgroundColor3

		Example.MouseButton1Click:Connect(function()
			Size()
			for _, frame in pairs(PageHold:GetChildren()) do
				if frame:IsA("ScrollingFrame") then
					frame.Visible = false
				end
			end

			local _, theme = Library:GetTheme()
			for _, button in pairs(Holder2:GetChildren()) do
				if button:IsA("TextButton") then
					button.BackgroundColor3 = theme.TabBackground
					button.TextColor3 = theme.TabText
					local btnIcon = button:FindFirstChild("Icon")
					if btnIcon then
						btnIcon.ImageColor3 = theme.TabText
					end
				end
			end

			Left.Visible = true
			Example.BackgroundColor3 = theme.TabActive
			TextLabel.TextColor3 = theme.TabText
			TabTitle.TextColor3 = theme.TabText

			IconImage.ImageColor3 = theme.TabText

			activeTab = Example
		end)


		return Holder
	end
	
	
	
	
	
	
	
	--Noitfy
	do
		local Notifications = {}
		local MaxVisible = 5
		local NotificationSpacing = 8

		local NotificationThemes = {
			Success = Color3.fromRGB(46, 204, 113),
			Error   = Color3.fromRGB(231, 76, 60),
			Info    = Color3.fromRGB(52, 152, 219),
			Warning = Color3.fromRGB(241, 196, 15),
			Default = Color3.fromRGB(155, 155, 155)
		}

		local function UpdateStackPositions(Library)
			for i, notif in ipairs(Notifications) do
				if notif and notif.Frame then
					local targetY = -20 - ((i - 1) * (notif.Frame.AbsoluteSize.Y + NotificationSpacing))
					Library:Tween(notif.Frame, {Position = UDim2.new(1, -20, 1, targetY)}, 0.2)
				end
			end
		end

		function Library:ShowNotify(title, text, duration, typeName, iconId, customTheme)
			duration = duration or 3
			typeName = typeName or "Default"

			local accentColor = (customTheme and customTheme.Color) or NotificationThemes[typeName] or NotificationThemes.Default

			local ScreenGui = Instance.new("ScreenGui")
			ScreenGui.Name = "Notification_" .. title
			ScreenGui.ResetOnSpawn = false
			ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
			ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

			local Notification = Instance.new("Frame")
			Notification.Name = "Notification"
			Notification.Parent = ScreenGui
			Notification.BackgroundColor3 = (customTheme and customTheme.Background) or self:GetThemeColor("Element")
			Notification.BorderSizePixel = 0
			Notification.Size = UDim2.new(0, 300, 0, 70)
			Notification.AnchorPoint = Vector2.new(1, 1)
			Notification.Position = UDim2.new(1, -20, 1, 100)
			Notification.BackgroundTransparency = 1

			local Corner = Instance.new("UICorner")
			Corner.CornerRadius = UDim.new(0, 8)
			Corner.Parent = Notification

			local UIStroke = Instance.new("UIStroke")
			UIStroke.Color = (customTheme and customTheme.Stroke) or self:GetThemeColor("Stroke")
			UIStroke.Thickness = 1.5
			UIStroke.Parent = Notification

			local Accent = Instance.new("Frame")
			Accent.Name = "Accent"
			Accent.Parent = Notification
			Accent.Size = UDim2.new(0, 4, 1, 0)
			Accent.Position = UDim2.new(0, 0, 0, 0)
			Accent.BackgroundColor3 = accentColor
			Accent.BorderSizePixel = 0

			local AccentCorner = Instance.new("UICorner")
			AccentCorner.CornerRadius = UDim.new(0, 2)
			AccentCorner.Parent = Accent

			local TitleLabel = Instance.new("TextLabel")
			TitleLabel.Name = "Title"
			TitleLabel.Parent = Notification
			TitleLabel.BackgroundTransparency = 1
			TitleLabel.Position = UDim2.new(0.06, 0, 0.1, 0)
			TitleLabel.Size = UDim2.new(0.88, 0, 0.3, 0)
			TitleLabel.Font = Enum.Font.GothamSemibold
			TitleLabel.Text = title
			TitleLabel.TextColor3 = (customTheme and customTheme.Text) or self:GetThemeColor("Text")
			TitleLabel.TextSize = 14
			TitleLabel.TextXAlignment = Enum.TextXAlignment.Left

			local TextLabel = Instance.new("TextLabel")
			TextLabel.Name = "Text"
			TextLabel.Parent = Notification
			TextLabel.BackgroundTransparency = 1
			TextLabel.Position = UDim2.new(0.06, 0, 0.45, 0)
			TextLabel.Size = UDim2.new(0.88, 0, 0.4, 0)
			TextLabel.Font = Enum.Font.Gotham
			TextLabel.Text = text
			TextLabel.TextColor3 = (customTheme and customTheme.TextSecondary) or self:GetThemeColor("TextSecondary")
			TextLabel.TextSize = 12
			TextLabel.TextWrapped = true
			TextLabel.TextXAlignment = Enum.TextXAlignment.Left
			TextLabel.TextYAlignment = Enum.TextYAlignment.Top

			-- Auto-size notification based on text
			TextLabel:GetPropertyChangedSignal("TextBounds"):Connect(function()
				local newHeight = math.clamp(TextLabel.TextBounds.Y + 30, 70, 200)
				Notification.Size = UDim2.new(Notification.Size.X.Scale, Notification.Size.X.Offset, 0, newHeight)
				UpdateStackPositions(self)
			end)

			task.spawn(function()
				wait(0.05)
				local newHeight = math.clamp(TextLabel.TextBounds.Y + 30, 70, 200)
				Notification.Size = UDim2.new(Notification.Size.X.Scale, Notification.Size.X.Offset, 0, newHeight)
				UpdateStackPositions(self)
			end)

			-- Optional icon
			local Icon
			if iconId then
				Icon = Instance.new("ImageLabel")
				Icon.Name = "Icon"
				Icon.Parent = Notification
				Icon.BackgroundTransparency = 1
				Icon.Position = UDim2.new(0.02, 0, 0.25, 0)
				Icon.Size = UDim2.new(0, 16, 0, 16)
				Icon.Image = "rbxassetid://" .. iconId
				Icon.ImageColor3 = accentColor

				TitleLabel.Position = UDim2.new(0.08, 0, 0.1, 0)
				TextLabel.Position = UDim2.new(0.08, 0, 0.45, 0)
			end

			-- Progress bar
			local ProgressBar = Instance.new("Frame")
			ProgressBar.Name = "ProgressBar"
			ProgressBar.Parent = Notification
			ProgressBar.BackgroundColor3 = accentColor
			ProgressBar.BorderSizePixel = 0
			ProgressBar.AnchorPoint = Vector2.new(0, 1)
			ProgressBar.Position = UDim2.new(0, 0, 1, 0)
			ProgressBar.Size = UDim2.new(1, 0, 0, 3)

			local ProgressCorner = Instance.new("UICorner")
			ProgressCorner.CornerRadius = UDim.new(0, 1.5)
			ProgressCorner.Parent = ProgressBar

			-- Register objects for theme updates
			self:RegisterObject(Notification, {BackgroundColor3 = "Element"})
			self:RegisterObject(UIStroke, {Color = "Stroke"})
			self:RegisterObject(TitleLabel, {TextColor3 = "Text"})
			self:RegisterObject(TextLabel, {TextColor3 = "TextSecondary"})
			self:RegisterObject(Accent, {BackgroundColor3 = "Accent"})
			self:RegisterObject(ProgressBar, {BackgroundColor3 = "Accent"})
			if Icon then
				self:RegisterObject(Icon, {ImageColor3 = "Accent"})
			end

			-- Add to stack
			table.insert(Notifications, {Frame = Notification, Gui = ScreenGui})
			UpdateStackPositions(self)

			-- Animate in
			self:Tween(Notification, {BackgroundTransparency = 0, Position = UDim2.new(1, -20, 1, -20)}, 0.35, Enum.EasingStyle.Quad)

			-- Animate progress bar
			self:Tween(ProgressBar, {Size = UDim2.new(0, 0, 0, 3)}, duration, Enum.EasingStyle.Linear)

			-- Wait duration then slide down and remove
			task.delay(duration, function()
				self:Tween(Notification, {BackgroundTransparency = 1, Position = UDim2.new(1, -20, 1, 100)}, 0.3, Enum.EasingStyle.Quad)
				task.delay(0.35, function()
					for i, notif in ipairs(Notifications) do
						if notif.Frame == Notification then
							table.remove(Notifications, i)
							break
						end
					end
					UpdateStackPositions(self)
					if ScreenGui then ScreenGui:Destroy() end
				end)
			end)

			-- Remove oldest if exceeding max
			if #Notifications > MaxVisible then
				local oldest = table.remove(Notifications, 1)
				if oldest and oldest.Gui then
					oldest.Gui:Destroy()
				end
				UpdateStackPositions(self)
			end
		end
	end




	local HttpService = game:GetService("HttpService")
	local CONFIG_FOLDER = "Seraph_Hub_Configs"

	function Library:SaveConfig(name, data)
		if type(name) ~= "string" or name == "" then
			return false, "Invalid config name"
		end
		if type(data) ~= "table" then
			return false, "Data must be a table"
		end
		if not writefile or not isfolder or not makefolder then
			return false, "Executor does not support filesystem"
		end

		if not isfolder(CONFIG_FOLDER) then
			local ok, err = pcall(makefolder, CONFIG_FOLDER)
			if not ok then return false, "Failed to create folder: " .. tostring(err) end
		end

		local ok, encoded = pcall(HttpService.JSONEncode, HttpService, data)
		if not ok then return false, "Failed to encode JSON: " .. tostring(encoded) end

		local path = CONFIG_FOLDER.."/"..name..".json"
		local writeOk, writeErr = pcall(writefile, path, encoded)
		if not writeOk then return false, "Failed to write file: " .. tostring(writeErr) end

		return true
	end

	function Library:LoadConfig(name)
		if type(name) ~= "string" or name == "" then
			return nil, "Invalid config name"
		end
		if not readfile or not isfile then
			return nil, "Executor does not support filesystem"
		end

		local path = CONFIG_FOLDER.."/"..name..".json"
		if not isfile(path) then
			return nil, "Config file does not exist"
		end

		local readOk, content = pcall(readfile, path)
		if not readOk then return nil, "Failed to read file: " .. tostring(content) end

		local decodeOk, data = pcall(HttpService.JSONDecode, HttpService, content)
		if not decodeOk then return nil, "Failed to decode JSON: " .. tostring(data) end

		if type(data) ~= "table" then
			return nil, "Decoded data is not a table"
		end

		return data
	end



	-- Button Creation
	function Library:Button(Parent, ButName, Callback)
		local ButName = ButName or "Button"
		local ButtonFunction = {}
		local Callback = Callback or function() end

		local Button = Instance.new("TextButton")
		local UICorner = Instance.new("UICorner")
		local TextLabel = Instance.new("TextLabel")
		local UIPadding = Instance.new("UIPadding")
		local Status = Instance.new("Frame")
		local ActualThing = Instance.new("Frame")
		local ImageLabel = Instance.new("ImageLabel")
		local UIScale = Instance.new("UIScale")
		local UIStroke = Instance.new("UIStroke")
		local ClickSound = Instance.new("Sound")

		-- Main Button
		Button.Name = "Button"
		Button.Parent = Parent
		Button.BackgroundColor3 = Library:GetThemeColor("Element")
		Button.BorderSizePixel = 0
		Button.Position = UDim2.new(0, 0, 0, 0)
		Button.Selectable = false
		Button.Size = UDim2.new(1, -20, 0, 31)
		Button.AutoButtonColor = false
		Button.Text = ""

		UICorner.CornerRadius = UDim.new(0, 6)
		UICorner.Parent = Button

		UIStroke.Parent = Button
		UIStroke.Color = Library:GetThemeColor("Stroke")
		UIStroke.Thickness = 1.5
		UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

		-- Text
		TextLabel.Parent = Button
		TextLabel.BackgroundTransparency = 1
		TextLabel.Size = UDim2.new(0.8, 0, 1, 0)
		TextLabel.Font = Enum.Font.GothamSemibold
		TextLabel.Text = ButName
		TextLabel.TextColor3 = Library:GetThemeColor("Text")
		TextLabel.TextSize = 13
		TextLabel.TextXAlignment = Enum.TextXAlignment.Left

		UIPadding.Parent = TextLabel
		UIPadding.PaddingLeft = UDim.new(0, 12)

		-- Status / Icon container
		Status.Name = "Status"
		Status.Parent = Button
		Status.BackgroundTransparency = 1
		Status.Position = UDim2.new(0.8, 0, 0, 0)
		Status.Size = UDim2.new(0.2, 0, 1, 0)

		ActualThing.Name = "ActualThing"
		ActualThing.Parent = Status
		ActualThing.AnchorPoint = Vector2.new(0.5, 0.5)
		ActualThing.BackgroundColor3 = Library:GetThemeColor("Element")
		ActualThing.BackgroundTransparency = 1
		ActualThing.BorderSizePixel = 0
		ActualThing.Position = UDim2.new(0.5, 0, 0.5, 0)
		ActualThing.Size = UDim2.new(0, 20, 0, 20)

		local ThingCorner = Instance.new("UICorner")
		ThingCorner.CornerRadius = UDim.new(0, 4)
		ThingCorner.Parent = ActualThing

		local ThingStroke = Instance.new("UIStroke")
		ThingStroke.Parent = ActualThing
		ThingStroke.Color = Library:GetThemeColor("Stroke")
		ThingStroke.Thickness = 1.5

		-- Icon
		ImageLabel.Parent = ActualThing
		ImageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
		ImageLabel.BackgroundTransparency = 1
		ImageLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
		ImageLabel.Size = UDim2.new(0, 14, 0, 14)
		ImageLabel.Image = "rbxassetid://7734010488"
		ImageLabel.ImageColor3 = Library:GetThemeColor("Icon")

		UIScale.Parent = ImageLabel
		UIScale.Scale = 0.85

		-- Click sound
		ClickSound.SoundId = "rbxassetid://9114262381"
		ClickSound.Volume = 0.4
		ClickSound.Parent = Button

		-- Register theme objects
		self:RegisterObject(Button, {BackgroundColor3 = "Element"})
		self:RegisterObject(TextLabel, {TextColor3 = "Text"})
		self:RegisterObject(UIStroke, {Color = "Stroke"})
		self:RegisterObject(ActualThing, {BackgroundColor3 = "Element"})

		-- Hover effect
		Button.MouseEnter:Connect(function()
			Library:Tween(Button, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.15)
			Library:Tween(UIStroke, {Color = Library:GetThemeColor("StrokeHover")}, 0.15)
			Library:Tween(TextLabel, {TextColor3 = Library:GetThemeColor("TextHover")}, 0.15)
		end)

		Button.MouseLeave:Connect(function()
			Library:Tween(Button, {BackgroundColor3 = Library:GetThemeColor("Element")}, 0.15)
			Library:Tween(UIStroke, {Color = Library:GetThemeColor("Stroke")}, 0.15)
			Library:Tween(TextLabel, {TextColor3 = Library:GetThemeColor("Text")}, 0.15)
		end)

		-- Click effect
		Button.MouseButton1Click:Connect(function()
			ClickSound:Play()
			Library:Tween(Button, {BackgroundColor3 = Library:GetThemeColor("ElementPressed")}, 0.1)
			Library:Tween(ImageLabel, {ImageColor3 = Library:GetThemeColor("Success")}, 0.1)

			task.delay(0.1, function()
				Library:Tween(Button, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.1)
				Library:Tween(ImageLabel, {ImageColor3 = Library:GetThemeColor("Icon")}, 0.1)
			end)

			Callback()
		end)

		-- Button API
		function ButtonFunction:UpdateButton(newTitle)
			TextLabel.Text = newTitle
		end

		function ButtonFunction:SetActive(state)
			if state then
				ImageLabel.ImageColor3 = Library:GetThemeColor("Success")
			else
				ImageLabel.ImageColor3 = Library:GetThemeColor("Icon")
			end
		end

		function ButtonFunction:SetIcon(assetId)
			if assetId then
				ImageLabel.Image = "rbxassetid://" .. assetId
			end
		end

		function ButtonFunction:SetColor(color)
			if color then
				ActualThing.BackgroundColor3 = color
			end
		end

		return ButtonFunction
	end

	
	
	function Library:Label(parent, LabelText)
		local LabelText = LabelText or "Label"
		local labelFunctions = {}

		local Label = Instance.new("TextLabel")
		local LabCorner = Instance.new("UICorner")
		local LabStroke = Instance.new("UIStroke")
		local UIPadding = Instance.new("UIPadding")

		Label.Name = "Label"
		Label.Parent = parent
		Label.BackgroundColor3 = Library:GetThemeColor("Element")
		Label.BorderSizePixel = 0
		Label.Size = UDim2.new(1, -20, 0, 31)
		Label.Text = LabelText
		Label.TextColor3 = Library:GetThemeColor("TextSecondary")
		Label.TextSize = 13
		Label.Font = Enum.Font.GothamSemibold
		Label.TextYAlignment = Enum.TextYAlignment.Center
		Label.TextXAlignment = Enum.TextXAlignment.Center
		Label.TextWrapped = true
		Label.ClipsDescendants = true

		LabCorner.CornerRadius = UDim.new(0, 6)
		LabCorner.Parent = Label

		LabStroke.Parent = Label
		LabStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
		LabStroke.Color = Library:GetThemeColor("Stroke")
		LabStroke.Thickness = 1.5

		UIPadding.Parent = Label
		UIPadding.PaddingLeft = UDim.new(0, 12)
		UIPadding.PaddingRight = UDim.new(0, 12)

		self:RegisterObject(Label, {
			BackgroundColor3 = "Element",
			TextColor3 = "TextSecondary"
		})
		self:RegisterObject(LabStroke, {Color = "Stroke"})

		-- Hover effects
		Label.MouseEnter:Connect(function()
			Library:Tween(Label, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.2)
			Library:Tween(LabStroke, {Color = Library:GetThemeColor("StrokeHover")}, 0.2)
			Library:Tween(Label, {TextColor3 = Library:GetThemeColor("Text")}, 0.2)
		end)

		Label.MouseLeave:Connect(function()
			Library:Tween(Label, {BackgroundColor3 = Library:GetThemeColor("Element")}, 0.2)
			Library:Tween(LabStroke, {Color = Library:GetThemeColor("Stroke")}, 0.2)
			Library:Tween(Label, {TextColor3 = Library:GetThemeColor("TextSecondary")}, 0.2)
		end)

		function labelFunctions:UpdateLabel(newText)
			Label.Text = newText
		end

		function labelFunctions:SetColor(color)
			if color then
				Label.TextColor3 = color
			end
		end

		return labelFunctions
	end




	function Library:TextBox(parent, titleText, defaultValue, callback)
		local Container = Instance.new("Frame")
		Container.Parent = parent
		Container.BackgroundColor3 = Library:GetThemeColor("Element")
		Container.BorderSizePixel = 0
		Container.Size = UDim2.new(1, -20, 0, 31)

		local UICorner = Instance.new("UICorner")
		UICorner.CornerRadius = UDim.new(0, 6)
		UICorner.Parent = Container

		local TitleLabel = Instance.new("TextLabel")
		TitleLabel.Parent = Container
		TitleLabel.BackgroundTransparency = 1
		TitleLabel.Font = Enum.Font.GothamSemibold
		TitleLabel.Text = titleText
		TitleLabel.TextColor3 = Library:GetThemeColor("Text")
		TitleLabel.TextSize = 13
		TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
		TitleLabel.Position = UDim2.new(0, 12, 0.5, 0)
		TitleLabel.AnchorPoint = Vector2.new(0, 0.5)
		TitleLabel.Size = UDim2.new(0.5, -12, 0.8, 0)
		TitleLabel.TextWrapped = true

		local TextInput = Instance.new("TextBox")
		TextInput.Parent = Container
		TextInput.BackgroundColor3 = Library:GetThemeColor("Element")
		TextInput.BackgroundTransparency = 1
		TextInput.BorderSizePixel = 0
		TextInput.ClearTextOnFocus = false
		TextInput.Font = Enum.Font.Gotham
		TextInput.PlaceholderText = titleText
		TextInput.PlaceholderColor3 = Library:GetThemeColor("TextMuted")
		TextInput.Text = defaultValue or ""
		TextInput.TextColor3 = Library:GetThemeColor("Text")
		TextInput.TextSize = 13
		TextInput.Position = UDim2.new(1, -12, 0.5, 0)
		TextInput.AnchorPoint = Vector2.new(1, 0.5)
		TextInput.Size = UDim2.new(0, 120, 0.7, 0)
		TextInput.ClipsDescendants = true
		TextInput.TextXAlignment = Enum.TextXAlignment.Right

		local UICornerTextBox = Instance.new("UICorner")
		UICornerTextBox.CornerRadius = UDim.new(0, 4)
		UICornerTextBox.Parent = TextInput

		local InputStroke = Instance.new("UIStroke")
		InputStroke.Parent = TextInput
		InputStroke.Color = Library:GetThemeColor("Stroke")
		InputStroke.Thickness = 1.5

		local Stroke = Instance.new("UIStroke")
		Stroke.Parent = Container
		Stroke.Color = Library:GetThemeColor("Stroke")
		Stroke.Thickness = 1.5

		-- Register objects for theme updates
		self:RegisterObject(Container, {BackgroundColor3 = "Element"})
		self:RegisterObject(TitleLabel, {TextColor3 = "Text"})
		self:RegisterObject(TextInput, {TextColor3 = "Text"})
		self:RegisterObject(Stroke, {Color = "Stroke"})
		self:RegisterObject(InputStroke, {Color = "Stroke"})
		
		
		
		-- Hover & focus effects
		TextInput.MouseEnter:Connect(function()
			Library:Tween(TextInput, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.15)
			Library:Tween(InputStroke, {Color = Library:GetThemeColor("StrokeHover")}, 0.15)
		end)

		TextInput.MouseLeave:Connect(function()
			if not TextInput:IsFocused() then
				Library:Tween(TextInput, {BackgroundColor3 = Library:GetThemeColor("Element")}, 0.15)
				Library:Tween(InputStroke, {Color = Library:GetThemeColor("Stroke")}, 0.15)
			end
		end)

		TextInput.Focused:Connect(function()
			Library:Tween(TextInput, {BackgroundColor3 = Library:GetThemeColor("ElementPressed")}, 0.15)
			Library:Tween(InputStroke, {Color = Library:GetThemeColor("Success")}, 0.15)
			Library:Tween(Stroke, {Color = Library:GetThemeColor("Success")}, 0.15)
		end)

		TextInput.FocusLost:Connect(function()
			Library:Tween(TextInput, {BackgroundColor3 = Library:GetThemeColor("Element")}, 0.15)
			Library:Tween(InputStroke, {Color = Library:GetThemeColor("Stroke")}, 0.15)
			Library:Tween(Stroke, {Color = Library:GetThemeColor("Stroke")}, 0.15)
		end)

		Container.MouseEnter:Connect(function()
			Library:Tween(Container, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.15)
			Library:Tween(Stroke, {Color = Library:GetThemeColor("StrokeHover")}, 0.15)
		end)

		Container.MouseLeave:Connect(function()
			Library:Tween(Container, {BackgroundColor3 = Library:GetThemeColor("Element")}, 0.15)
			Library:Tween(Stroke, {Color = Library:GetThemeColor("Stroke")}, 0.15)
		end)

		-- Dynamic width adjustment
		local minWidth, padding, approxCharWidth = 50, 15, 7
		local function updateWidth()
			local containerMax = Container.AbsoluteSize.X * 0.6
			local realMin = math.min(minWidth, containerMax)
			local realMax = math.max(containerMax, realMin)
			local desired = #TextInput.Text * approxCharWidth + padding
			local w = math.clamp(desired, realMin, realMax)
			TextInput.Size = UDim2.new(0, w, 0, TextInput.AbsoluteSize.Y)
		end

		TextInput:GetPropertyChangedSignal("Text"):Connect(updateWidth)
		Container:GetPropertyChangedSignal("AbsoluteSize"):Connect(updateWidth)

		TextInput.FocusLost:Connect(function(enterPressed)
			callback(TextInput.Text, enterPressed)
			updateWidth()
		end)

		updateWidth()

		-- Return textbox and manual submit function
		return TextInput, function()
			callback(TextInput.Text, true)
			updateWidth()
		end
	end



	--toggle
	function Library:Toggle(tab, toggleName, callback)
		local TweenService = game:GetService("TweenService")
		local TogFunction = {}

		local Toggle = Instance.new("TextButton")
		Toggle.Name = "Toggle"
		Toggle.Parent = tab
		Toggle.BackgroundColor3 = Library:GetThemeColor("Element")
		Toggle.BorderSizePixel = 0
		Toggle.Size = UDim2.new(1, -20, 0, 31)
		Toggle.AutoButtonColor = false
		Toggle.Text = ""

		local UICorner = Instance.new("UICorner")
		UICorner.CornerRadius = UDim.new(0, 6)
		UICorner.Parent = Toggle

		local UIStroke = Instance.new("UIStroke")
		UIStroke.Color = Library:GetThemeColor("Stroke")
		UIStroke.Thickness = 1.5
		UIStroke.Parent = Toggle

		local HoverSound = Instance.new("Sound")
		HoverSound.SoundId = "rbxassetid://2809024273"
		HoverSound.Volume = 0.3
		HoverSound.Parent = Toggle

		local ClickSound = Instance.new("Sound")
		ClickSound.SoundId = "rbxassetid://9114262381"
		ClickSound.Volume = 0.4
		ClickSound.Parent = Toggle

		local TextLabel = Instance.new("TextLabel")
		TextLabel.BackgroundTransparency = 1
		TextLabel.Size = UDim2.new(0.75, 0, 1, 0)
		TextLabel.Font = Enum.Font.GothamSemibold
		TextLabel.Text = toggleName
		TextLabel.TextColor3 = Library:GetThemeColor("Text")
		TextLabel.TextSize = 13
		TextLabel.TextXAlignment = Enum.TextXAlignment.Left
		TextLabel.Parent = Toggle

		local UIPadding = Instance.new("UIPadding")
		UIPadding.PaddingLeft = UDim.new(0, 12)
		UIPadding.Parent = TextLabel

		local Status = Instance.new("Frame")
		Status.Name = "Status"
		Status.BackgroundTransparency = 1
		Status.Position = UDim2.new(0.75, 0, 0, 0)
		Status.Size = UDim2.new(0.25, 0, 1, 0)
		Status.Parent = Toggle

		local ToggleBckg = Instance.new("Frame")
		ToggleBckg.Name = "ToggleBckg"
		ToggleBckg.AnchorPoint = Vector2.new(0.5, 0.5)
		ToggleBckg.BackgroundColor3 = Library:GetThemeColor("Element")
		ToggleBckg.BorderSizePixel = 0
		ToggleBckg.Position = UDim2.new(0.5, 0, 0.5, 0)
		ToggleBckg.Size = UDim2.new(0, 20, 0, 20)
		ToggleBckg.Parent = Status

		local UICorner_2 = Instance.new("UICorner")
		UICorner_2.CornerRadius = UDim.new(0, 4)
		UICorner_2.Parent = ToggleBckg

		local BckgStroke = Instance.new("UIStroke")
		BckgStroke.Color = Library:GetThemeColor("Stroke")
		BckgStroke.Thickness = 1.5
		BckgStroke.Parent = ToggleBckg

		local Icon = Instance.new("ImageLabel")
		Icon.Name = "Icon"
		Icon.AnchorPoint = Vector2.new(0.5, 0.5)
		Icon.BackgroundTransparency = 1
		Icon.Position = UDim2.new(0.5, 0, 0.5, 0)
		Icon.Size = UDim2.new(0, 14, 0, 14)
		Icon.Image = "rbxassetid://13319773302"
		Icon.ImageColor3 = Library:GetThemeColor("Success")
		Icon.ImageTransparency = 1
		Icon.Parent = ToggleBckg

		local UIScale = Instance.new("UIScale")
		UIScale.Scale = 0.9
		UIScale.Parent = Icon

		local PulseEffect = Instance.new("Frame")
		PulseEffect.Name = "PulseEffect"
		PulseEffect.AnchorPoint = Vector2.new(0.5, 0.5)
		PulseEffect.BackgroundColor3 = Library:GetThemeColor("Success")
		PulseEffect.BackgroundTransparency = 0.8
		PulseEffect.BorderSizePixel = 0
		PulseEffect.Position = UDim2.new(0.5, 0, 0.5, 0)
		PulseEffect.Size = UDim2.new(1, 0, 1, 0)
		PulseEffect.Visible = false
		PulseEffect.Parent = ToggleBckg

		local PulseCorner = Instance.new("UICorner")
		PulseCorner.CornerRadius = UDim.new(0, 4)
		PulseCorner.Parent = PulseEffect

		-- Theme registration
		self:RegisterObject(Toggle, {BackgroundColor3 = "Element"})
		self:RegisterObject(TextLabel, {TextColor3 = "Text"})
		self:RegisterObject(UIStroke, {Color = "Stroke"})
		self:RegisterObject(ToggleBckg, {BackgroundColor3 = "Element"})
		self:RegisterObject(Icon, {ImageColor3 = "Success"})
		self:RegisterObject(PulseEffect, {BackgroundColor3 = "Success"})

		local isToggled = false

		local function updateVisual()
			if isToggled then
				Icon.ImageTransparency = 0
				Icon.ImageColor3 = Library:GetThemeColor("Success")
				ToggleBckg.BackgroundColor3 = Library:GetThemeColor("ElementActive")
			else
				Icon.ImageTransparency = 1
				Icon.ImageColor3 = Library:GetThemeColor("TextMuted")
				ToggleBckg.BackgroundColor3 = Library:GetThemeColor("Element")
			end
		end

		local function playToggleAnimation()
			ClickSound:Play()
			PulseEffect.Visible = true
			PulseEffect.Size = UDim2.new(1, 0, 1, 0)
			PulseEffect.BackgroundTransparency = 0.7
			local pulseTween = TweenService:Create(PulseEffect, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
				Size = UDim2.new(1.5, 0, 1.5, 0),
				BackgroundTransparency = 1
			})
			pulseTween:Play()
			pulseTween.Completed:Connect(function()
				PulseEffect.Visible = false
			end)
			updateVisual()
		end

		local function toggleState()
			isToggled = not isToggled
			playToggleAnimation()
			pcall(callback, isToggled)
		end

		Toggle.MouseButton1Click:Connect(toggleState)

		-- Hover effects
		Toggle.MouseEnter:Connect(function()
			HoverSound:Play()
			Library:Tween(Toggle, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.15)
			Library:Tween(UIStroke, {Color = Library:GetThemeColor("StrokeHover")}, 0.15)
			Library:Tween(TextLabel, {TextColor3 = Library:GetThemeColor("Text")}, 0.15)
			if isToggled == false then
				Library:Tween(ToggleBckg, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.15)
			end
		end)
		Toggle.MouseLeave:Connect(function()
			Library:Tween(Toggle, {BackgroundColor3 = Library:GetThemeColor("Element")}, 0.15)
			Library:Tween(UIStroke, {Color = Library:GetThemeColor("Stroke")}, 0.15)
			Library:Tween(TextLabel, {TextColor3 = Library:GetThemeColor("Text")}, 0.15)
			updateVisual()
		end)

		function TogFunction:Set(state)
			if isToggled ~= state then
				isToggled = state
				playToggleAnimation()
				pcall(callback, isToggled)
			end
		end

		function TogFunction:Get()
			return isToggled
		end

		return TogFunction
	end




	function Library:Slider(parent, Name, Min, Max, DefaultValue, Callback)
		local TweenService = game:GetService("TweenService")
		local UserInputService = game:GetService("UserInputService")

		Name = Name or "Slider"
		Min = tonumber(Min) or 0
		Max = tonumber(Max) or 100
		DefaultValue = tonumber(DefaultValue) or Min
		Callback = type(Callback) == "function" and Callback or function() end

		local Slider = Instance.new("Frame")
		Slider.Name = "Slider"
		Slider.Parent = parent
		Slider.BackgroundColor3 = Library:GetThemeColor("Element")
		Slider.BorderSizePixel = 0
		Slider.Size = UDim2.new(1, -20, 0, 31)

		local UICorner = Instance.new("UICorner", Slider)
		UICorner.CornerRadius = UDim.new(0, 4)

		local UIStroke = Instance.new("UIStroke", Slider)
		UIStroke.Color = Library:GetThemeColor("Stroke")
		UIStroke.Thickness = 1.5

		local Title = Instance.new("TextLabel")
		Title.Name = "Title"
		Title.Parent = Slider
		Title.AnchorPoint = Vector2.new(0, 0.5)
		Title.BackgroundTransparency = 1
		Title.Position = UDim2.new(0, 10, 0.5, 0)
		Title.Size = UDim2.new(0.4, 0, 0, 14)
		Title.Font = Enum.Font.GothamMedium
		Title.Text = Name
		Title.TextColor3 = Library:GetThemeColor("Text")
		Title.TextScaled = true
		Title.TextWrapped = true
		Title.TextXAlignment = Enum.TextXAlignment.Left

		local Main = Instance.new("Frame")
		Main.Name = "Main"
		Main.Parent = Slider
		Main.AnchorPoint = Vector2.new(1, 0.5)
		Main.BackgroundColor3 = Library:GetThemeColor("Element")
		Main.BorderSizePixel = 0
		Main.Position = UDim2.new(1, -10, 0.5, 0)
		Main.Size = UDim2.new(0.5, 0, 0, 26)
		Main.ZIndex = 3

		local MainCorner = Instance.new("UICorner", Main)
		MainCorner.CornerRadius = UDim.new(0, 6)

		local MainStroke = Instance.new("UIStroke", Main)
		MainStroke.Color = Library:GetThemeColor("Stroke")
		MainStroke.Thickness = 1.5

		local Progress = Instance.new("Frame")
		Progress.Name = "Progress"
		Progress.Parent = Main
		Progress.BackgroundColor3 = Library:GetThemeColor("ElementActive")
		Progress.BorderSizePixel = 0
		Progress.Size = UDim2.new(0, 0, 1, 0)

		local ProgressCorner = Instance.new("UICorner", Progress)
		ProgressCorner.CornerRadius = UDim.new(0, 6)

		local ProgressStroke = Instance.new("UIStroke", Progress)
		ProgressStroke.Color = Library:GetThemeColor("Stroke")
		ProgressStroke.Thickness = 1.5

		local Information = Instance.new("TextLabel")
		Information.Name = "Information"
		Information.Parent = Main
		Information.AnchorPoint = Vector2.new(0.5, 0.5)
		Information.BackgroundTransparency = 1
		Information.Position = UDim2.new(0.5, 0, 0.5, 0)
		Information.Size = UDim2.new(1, 0, 1, 0)
		Information.ZIndex = 5
		Information.Font = Enum.Font.GothamMedium
		Information.Text = tostring(DefaultValue)
		Information.TextColor3 = Library:GetThemeColor("Text")
		Information.TextScaled = true
		Information.TextTransparency = 0.4
		Information.TextWrapped = true
		Information.TextXAlignment = Enum.TextXAlignment.Center

		local Shadow = Instance.new("ImageLabel")
		Shadow.Name = "Shadow"
		Shadow.Parent = Main
		Shadow.AnchorPoint = Vector2.new(0.5, 0.5)
		Shadow.BackgroundTransparency = 1
		Shadow.Position = UDim2.new(0.5, 0, 0.5, 0)
		Shadow.Size = UDim2.new(1, 0, 1, 0)
		Shadow.ZIndex = 3
		Shadow.Image = "rbxassetid://3602733521"
		Shadow.ImageColor3 = Library:GetThemeColor("ElementDark") or Color3.fromRGB(20, 20, 20)
		Shadow.ImageTransparency = 0.7

		local ShadowCorner = Instance.new("UICorner", Shadow)
		ShadowCorner.CornerRadius = UDim.new(0, 6)

		local Interact = Instance.new("TextButton")
		Interact.Name = "Interact"
		Interact.Parent = Main
		Interact.BackgroundTransparency = 1
		Interact.Size = UDim2.new(1, 0, 1, 0)
		Interact.ZIndex = 10
		Interact.Text = ""

		self:RegisterObject(Slider, {BackgroundColor3 = "Element"})
		self:RegisterObject(Title, {TextColor3 = "Text"})
		self:RegisterObject(UIStroke, {Color = "Stroke"})
		self:RegisterObject(Main, {BackgroundColor3 = "Element"})
		self:RegisterObject(Information, {TextColor3 = "Text"})
		self:RegisterObject(Progress, {BackgroundColor3 = "ElementActive"})

		local currentValue = DefaultValue

		local function tweenProgress(value)
			value = math.clamp(value, Min, Max)
			currentValue = value
			local percent = (currentValue - Min) / (Max - Min)

			TweenService:Create(Progress, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
				Size = UDim2.new(percent, 0, 1, 0)
			}):Play()

			Information.Text = tostring(currentValue)
		end

		local moveConn, releaseConn

		local function updateValue(mouseX)
			local relativeX = mouseX - Main.AbsolutePosition.X
			local percent = math.clamp(relativeX / Main.AbsoluteSize.X, 0, 1)
			local newValue = math.floor(percent * (Max - Min) + Min)
			newValue = math.clamp(newValue, Min, Max)
			if newValue ~= currentValue then
				tweenProgress(newValue)
			end
		end

		Interact.InputBegan:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseButton1 then
				updateValue(input.Position.X)

				if moveConn then moveConn:Disconnect() end
				if releaseConn then releaseConn:Disconnect() end

				moveConn = Interact.InputChanged:Connect(function(moveInput)
					if moveInput.UserInputType == Enum.UserInputType.MouseMovement then
						updateValue(moveInput.Position.X)
					end
				end)

				releaseConn = UserInputService.InputEnded:Connect(function(endInput)
					if endInput.UserInputType == Enum.UserInputType.MouseButton1 then
						if moveConn then moveConn:Disconnect() end
						if releaseConn then releaseConn:Disconnect() end
						pcall(Callback, currentValue)
					end
				end)
			end
		end)

		tweenProgress(DefaultValue)
		pcall(Callback, DefaultValue)

		return Slider, function()
			pcall(Callback, currentValue)
			return currentValue
		end
	end



	function Library:Keybind(tab, keybindName, defaultKey, callback)
		local TweenService = game:GetService("TweenService")
		local UserInputService = game:GetService("UserInputService")

		keybindName = keybindName or "Keybind"
		defaultKey = defaultKey or Enum.KeyCode.K
		callback = type(callback) == "function" and callback or function() end

		local Keybind = Instance.new("TextButton")
		Keybind.Name = keybindName
		Keybind.Parent = tab
		Keybind.BackgroundColor3 = Library:GetThemeColor("Element")
		Keybind.BorderSizePixel = 0
		Keybind.Size = UDim2.new(1, -20, 0, 31)
		Keybind.AutoButtonColor = false
		Keybind.Text = ""
		Keybind.Selectable = false

		local UICorner = Instance.new("UICorner", Keybind)
		UICorner.CornerRadius = UDim.new(0, 5)

		local TextLabel = Instance.new("TextLabel")
		TextLabel.Parent = Keybind
		TextLabel.BackgroundTransparency = 1
		TextLabel.Size = UDim2.new(0.75, 0, 1, 0)
		TextLabel.Position = UDim2.new(0, 10, 0, 0)
		TextLabel.Font = Enum.Font.GothamMedium
		TextLabel.Text = keybindName
		TextLabel.TextColor3 = Library:GetThemeColor("Text")
		TextLabel.TextSize = 12
		TextLabel.TextXAlignment = Enum.TextXAlignment.Left

		local Status = Instance.new("Frame")
		Status.Name = "Status"
		Status.Parent = Keybind
		Status.BackgroundTransparency = 1
		Status.Size = UDim2.new(0.25, 0, 1, 0)
		Status.Position = UDim2.new(0.75, 0, 0, 0)

		local statcor = Instance.new("UICorner", Status)
		statcor.CornerRadius = UDim.new(0, 4)

		local keyStroke = Instance.new("UIStroke")
		keyStroke.Parent = Status
		keyStroke.Color = Library:GetThemeColor("Stroke")
		keyStroke.Thickness = 2

		local TextLabel_2 = Instance.new("TextLabel")
		TextLabel_2.Parent = Status
		TextLabel_2.BackgroundTransparency = 1
		TextLabel_2.Size = UDim2.new(1, -4, 1, 0)
		TextLabel_2.Position = UDim2.new(0, 2, 0, 0)
		TextLabel_2.Font = Enum.Font.GothamMedium
		TextLabel_2.TextColor3 = Library:GetThemeColor("Accent")
		TextLabel_2.TextScaled = true
		TextLabel_2.TextWrapped = true
		TextLabel_2.TextXAlignment = Enum.TextXAlignment.Right

		local Pulse = Instance.new("Frame")
		Pulse.Name = "Pulse"
		Pulse.Parent = Status
		Pulse.AnchorPoint = Vector2.new(0.5, 0.5)
		Pulse.Size = UDim2.new(1, 0, 1, 0)
		Pulse.Position = UDim2.new(0.5, 0, 0.5, 0)
		Pulse.BackgroundColor3 = Library:GetThemeColor("Success")
		Pulse.BackgroundTransparency = 0.7
		Pulse.BorderSizePixel = 0
		Pulse.Visible = false
		local pulseCorner = Instance.new("UICorner", Pulse)
		pulseCorner.CornerRadius = UDim.new(0, 4)

		self:RegisterObject(Keybind, {BackgroundColor3 = "Element"})
		self:RegisterObject(TextLabel, {TextColor3 = "Text"})
		self:RegisterObject(keyStroke, {Color = "Stroke"})
		self:RegisterObject(TextLabel_2, {TextColor3 = "Accent"})

		local currentKey = defaultKey

		local function formatKey(input)
			if typeof(input) == "EnumItem" then
				local str = tostring(input)
				str = str:gsub("Enum%.KeyCode%.", "")
				str = str:gsub("Enum%.UserInputType%.", "")
				str = str:gsub("MouseButton1", "M1")
				str = str:gsub("MouseButton2", "M2")
				str = str:gsub("MouseButton3", "M3")
				str = str:gsub("LeftControl", "LCtrl")
				str = str:gsub("RightControl", "RCtrl")
				str = str:gsub("LeftShift", "LShift")
				str = str:gsub("RightShift", "RShift")
				str = str:gsub("LeftAlt", "LAlt")
				str = str:gsub("RightAlt", "RAlt")
				str = str:gsub("Return", "Enter")
				str = str:gsub("Escape", "Esc")
				str = str:gsub("Capital", "Caps")
				return str
			end
			return tostring(input)
		end

		local function updateKeyLabel()
			TextLabel_2.Text = formatKey(currentKey)
		end

		local function playPulse()
			Pulse.Visible = true
			Pulse.Size = UDim2.new(1, 0, 1, 0)
			Pulse.BackgroundTransparency = 0.7
			local tween = TweenService:Create(Pulse, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
				Size = UDim2.new(1.5, 0, 1.5, 0),
				BackgroundTransparency = 1
			})
			tween:Play()
			tween.Completed:Connect(function()
				Pulse.Visible = false
			end)
		end

		local function triggerCallback()
			pcall(callback, currentKey)
			playPulse()
		end

		UserInputService.InputBegan:Connect(function(input, isProcessed)
			if isProcessed then return end
			if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == currentKey then
				triggerCallback()
			elseif input.UserInputType ~= Enum.UserInputType.Keyboard and input.UserInputType == currentKey then
				triggerCallback()
			end
		end)

		-- Hover effects
		Keybind.MouseEnter:Connect(function()
			Library:Tween(Keybind, {BackgroundColor3 = Library:GetThemeColor("ElementHover")}, 0.15)
			Library:Tween(TextLabel, {TextColor3 = Library:GetThemeColor("TextHover")}, 0.15)
			Library:Tween(keyStroke, {Color = Library:GetThemeColor("AccentHover") or Library:GetThemeColor("Accent")}, 0.15)
		end)
		Keybind.MouseLeave:Connect(function()
			Library:Tween(Keybind, {BackgroundColor3 = Library:GetThemeColor("Element")}, 0.15)
			Library:Tween(TextLabel, {TextColor3 = Library:GetThemeColor("Text")}, 0.15)
			Library:Tween(keyStroke, {Color = Library:GetThemeColor("Stroke")}, 0.15)
		end)

		-- Reassign key
		Keybind.MouseButton1Click:Connect(function()
			TextLabel_2.Text = "..."
			local connection
			connection = UserInputService.InputBegan:Connect(function(input, isProcessed)
				if isProcessed then return end
				if input.UserInputType == Enum.UserInputType.Keyboard then
					currentKey = input.KeyCode
				elseif input.UserInputType == Enum.UserInputType.MouseButton1 or
					input.UserInputType == Enum.UserInputType.MouseButton2 or
					input.UserInputType == Enum.UserInputType.MouseButton3 or
					input.UserInputType == Enum.UserInputType.MouseWheel then
					currentKey = input.UserInputType
				else
					return
				end
				updateKeyLabel()
				triggerCallback()
				connection:Disconnect()
			end)
		end)

		updateKeyLabel()
		return Keybind, function() return currentKey end
	end




	--Color Picker is from Kavo!!!!!!!

	local TweenService = game:GetService("TweenService")
	local Players = game:GetService("Players")
	local Player = Players.LocalPlayer
	local Mouse = Player:GetMouse()
	local UserInputService = game:GetService("UserInputService")
	
	
	
	function Library:ColorPicker(tab, colText, defcolor, callback)
		colText = colText or "ColorPicker"
		callback = callback or function() end
		defcolor = defcolor or Color3.fromRGB(255, 255, 255)

		local h, s, v = Color3.toHSV(defcolor)
		local colorOpened = false
		local rainbowEnabled = false
		local rainbowConnection
		local rs = game:GetService("RunService")
		local colorpickerActive = false
		local darknessActive = false

		-- Main button
		local colorElement = Instance.new("TextButton")
		colorElement.Name = "colorElement"
		colorElement.Parent = tab
		colorElement.BackgroundColor3 = Library:GetThemeColor("Element")
		colorElement.ClipsDescendants = true
		colorElement.Size = UDim2.new(1, -20, 0, 31)
		colorElement.AutoButtonColor = false
		colorElement.Text = ""
		colorElement.AnchorPoint = Vector2.new(0, 0)
		colorElement.Position = UDim2.new(0, 10, 0, 0)

		local UICornercol = Instance.new("UICorner")
		UICornercol.CornerRadius = UDim.new(0, 5)
		UICornercol.Parent = colorElement

		local togName = Instance.new("TextLabel")
		togName.Name = "togName"
		togName.Parent = colorElement
		togName.BackgroundTransparency = 1
		togName.Position = UDim2.new(0, 10, 0, 0)
		togName.Size = UDim2.new(0, 200, 0, 31)
		togName.Font = Enum.Font.GothamMedium
		togName.Text = colText
		togName.TextColor3 = Library:GetThemeColor("Text")
		togName.TextSize = 12
		togName.TextXAlignment = Enum.TextXAlignment.Left

		-- Fixed colorCurrent positioning
		local colorCurrent = Instance.new("Frame")
		colorCurrent.Name = "colorCurrent"
		colorCurrent.Parent = colorElement
		colorCurrent.BackgroundColor3 = defcolor
		colorCurrent.Position = UDim2.new(1, -35, 0.5, 0)
		colorCurrent.Size = UDim2.new(0, 25, 0, 15)
		colorCurrent.AnchorPoint = Vector2.new(1, 0.5)
		local UICorner_3 = Instance.new("UICorner")
		UICorner_3.CornerRadius = UDim.new(0, 3)
		UICorner_3.Parent = colorCurrent

		-- Color picker dropdown
		local colorInners = Instance.new("Frame")
		colorInners.Name = "colorInners"
		colorInners.Parent = tab
		colorInners.BackgroundColor3 = Library:GetThemeColor("Background")
		colorInners.Position = UDim2.new(0, 10, 0, colorElement.Position.Y.Offset + colorElement.Size.Y.Offset + 5)
		colorInners.Size = UDim2.new(1, -20, 0, 0)
		colorInners.Visible = true
		colorInners.ClipsDescendants = true
		local UICorner_4 = Instance.new("UICorner")
		UICorner_4.CornerRadius = UDim.new(0, 5)
		UICorner_4.Parent = colorInners

		-- Sample preview
		local sampleFrame = Instance.new("Frame")
		sampleFrame.Name = "Sample"
		sampleFrame.Parent = colorInners
		sampleFrame.BackgroundColor3 = defcolor
		sampleFrame.Position = UDim2.new(0, 10, 0, 10)
		sampleFrame.Size = UDim2.new(0, 50, 0, 50)
		local UICornerSample = Instance.new("UICorner")
		UICornerSample.CornerRadius = UDim.new(0, 5)
		UICornerSample.Parent = sampleFrame

		local colorSquareContainer = Instance.new("Frame")
		colorSquareContainer.Name = "colorSquareContainer"
		colorSquareContainer.Parent = colorInners
		colorSquareContainer.BackgroundTransparency = 1
		colorSquareContainer.Position = UDim2.new(0, 70, 0, 10)
		colorSquareContainer.Size = UDim2.new(0, 120, 0, 120)

		local colorSquare = Instance.new("ImageButton")
		colorSquare.Name = "colorSquare"
		colorSquare.Parent = colorSquareContainer
		colorSquare.BackgroundTransparency = 1
		colorSquare.Size = UDim2.new(1, 0, 1, 0)
		colorSquare.Image = "http://www.roblox.com/asset/?id=6523286724"
		colorSquare.ScaleType = Enum.ScaleType.Stretch
		local UICornerSquare = Instance.new("UICorner")
		UICornerSquare.CornerRadius = UDim.new(0, 5)
		UICornerSquare.Parent = colorSquare

		local svCircle = Instance.new("ImageLabel")
		svCircle.Name = "svCircle"
		svCircle.Parent = colorSquare
		svCircle.AnchorPoint = Vector2.new(0.5, 0.5)
		svCircle.BackgroundTransparency = 1
		svCircle.Size = UDim2.new(0, 14, 0, 14)
		svCircle.Image = "rbxassetid://3926309567"
		svCircle.ImageColor3 = Library:GetThemeColor("Element")
		svCircle.ImageRectOffset = Vector2.new(628, 420)
		svCircle.ImageRectSize = Vector2.new(48, 48)
		svCircle.ZIndex = 2
		svCircle.Position = UDim2.new(s, 0, 1 - v, 0)

		-- Brightness slider
		local brightnessSlider = Instance.new("ImageButton")
		brightnessSlider.Name = "brightnessSlider"
		brightnessSlider.Parent = colorInners
		brightnessSlider.BackgroundTransparency = 1
		brightnessSlider.Position = UDim2.new(0, 200, 0, 10)
		brightnessSlider.Size = UDim2.new(0, 20, 0, 120)
		brightnessSlider.Image = "http://www.roblox.com/asset/?id=6523291212"
		local UICornerBrightness = Instance.new("UICorner")
		UICornerBrightness.CornerRadius = UDim.new(0, 5)
		UICornerBrightness.Parent = brightnessSlider

		local brightnessCircle = Instance.new("ImageLabel")
		brightnessCircle.Name = "brightnessCircle"
		brightnessCircle.Parent = brightnessSlider
		brightnessCircle.AnchorPoint = Vector2.new(0.5, 0.5)
		brightnessCircle.BackgroundTransparency = 1
		brightnessCircle.Size = UDim2.new(1.5, 0, 0, 14)
		brightnessCircle.Image = "rbxassetid://3926309567"
		brightnessCircle.ImageColor3 = Library:GetThemeColor("Element")
		brightnessCircle.ImageRectOffset = Vector2.new(628, 420)
		brightnessCircle.ImageRectSize = Vector2.new(48, 48)
		brightnessCircle.ZIndex = 2
		brightnessCircle.Position = UDim2.new(0.5, 0, 1 - v, 0)
		
		
		
		
		-- RGB inputs
		local function createInput(x, y, label)
			local lbl = Instance.new("TextLabel")
			lbl.Parent = colorInners
			lbl.BackgroundTransparency = 1
			lbl.Position = UDim2.new(0, x, 0, y)
			lbl.Size = UDim2.new(0, 15, 0, 20)
			lbl.Font = Enum.Font.GothamMedium
			lbl.TextColor3 = Library:GetThemeColor("Text")
			lbl.TextSize = 12
			lbl.Text = label

			local box = Instance.new("TextBox")
			box.Parent = colorInners
			box.Position = UDim2.new(0, x + 20, 0, y)
			box.Size = UDim2.new(0, 40, 0, 20)
			box.Font = Enum.Font.GothamMedium
			box.TextSize = 12
			box.TextColor3 = Library:GetThemeColor("Text")
			box.BackgroundColor3 = Library:GetThemeColor("Element")
			box.Text = tostring(math.floor(defcolor[label:lower()] * 255))
			local UIC = Instance.new("UICorner")
			UIC.CornerRadius = UDim.new(0, 4)
			UIC.Parent = box

			local padding = Instance.new("UIPadding")
			padding.Parent = box
			padding.PaddingLeft = UDim.new(0, 5)

			return box
		end

		local rBox = createInput(10, 140, "R")
		local gBox = createInput(70, 140, "G")
		local bBox = createInput(130, 140, "B")

		-- Rainbow toggle
		local toggleBckg = Instance.new("TextButton")
		toggleBckg.Name = "ToggleBckg"
		toggleBckg.Parent = colorInners
		toggleBckg.BackgroundColor3 = Library:GetThemeColor("Element")
		toggleBckg.Position = UDim2.new(0, 190, 0, 140)
		toggleBckg.Size = UDim2.new(0, 20, 0, 20)
		toggleBckg.Text = ""
		local UICornerToggle = Instance.new("UICorner")
		UICornerToggle.CornerRadius = UDim.new(0, 5)
		UICornerToggle.Parent = toggleBckg

		local toggleIcon = Instance.new("ImageLabel")
		toggleIcon.Name = "Icon"
		toggleIcon.Parent = toggleBckg
		toggleIcon.AnchorPoint = Vector2.new(0.5, 0.5)
		toggleIcon.BackgroundTransparency = 1
		toggleIcon.Position = UDim2.new(0.5, 0, 0.5, 0)
		toggleIcon.Size = UDim2.new(0, 16, 0, 16)
		toggleIcon.Image = "http://www.roblox.com/asset/?id=13319773302"
		toggleIcon.ImageColor3 = Library:GetThemeColor("Text")
		toggleIcon.ImageTransparency = 1

		local togName2 = Instance.new("TextLabel")
		togName2.Name = "togName"
		togName2.Parent = colorInners
		togName2.BackgroundTransparency = 1
		togName2.Position = UDim2.new(0, 215, 0, 140)
		togName2.Size = UDim2.new(0, 60, 0, 20)
		togName2.Font = Enum.Font.GothamMedium
		togName2.Text = "Rainbow"
		togName2.TextColor3 = Library:GetThemeColor("Text")
		togName2.TextSize = 12
		togName2.TextXAlignment = Enum.TextXAlignment.Left
		
		
		-- After creating the element
		self:RegisterObject(colorElement, {BackgroundColor3 = "Element"})
		self:RegisterObject(colorInners, {BackgroundColor3 = "Background"})
		self:RegisterObject(togName, {TextColor3 = "Text"})
		self:RegisterObject(sampleFrame, {BackgroundColor3 = "Element"}) -- optional
		self:RegisterObject(rBox, {BackgroundColor3 = "Element", TextColor3 = "Text"})
		self:RegisterObject(gBox, {BackgroundColor3 = "Element", TextColor3 = "Text"})
		self:RegisterObject(bBox, {BackgroundColor3 = "Element", TextColor3 = "Text"})
		self:RegisterObject(toggleBckg, {BackgroundColor3 = "Element"})
		self:RegisterObject(toggleIcon, {ImageColor3 = "Text"})
		self:RegisterObject(togName2, {TextColor3 = "Text"})
		
		
		
		local function setColor(color, updateCircles)
			updateCircles = updateCircles == nil and true or updateCircles

			colorCurrent.BackgroundColor3 = color
			sampleFrame.BackgroundColor3 = color
			rBox.Text = tostring(math.floor(color.R * 255))
			gBox.Text = tostring(math.floor(color.G * 255))
			bBox.Text = tostring(math.floor(color.B * 255))

			local oldH, oldS, oldV = h, s, v
			h, s, v = Color3.toHSV(color)

			-- Only update circle positions if requested and values actually changed
			if updateCircles then
				if oldS ~= s or oldV ~= v then
					-- Update SV circle position based on saturation and value
					svCircle.Position = UDim2.new(s, 0, 1 - v, 0)
				end

				if oldV ~= v then
					-- Update brightness circle position
					brightnessCircle.Position = UDim2.new(0.5, 0, 1 - v, 0)
				end
			end

			callback(color)
		end
		
		
		-- Improved color selection function
		local function updateColorPicker()
			if colorpickerActive then
				local x, y = Mouse.X - colorSquare.AbsolutePosition.X, Mouse.Y - colorSquare.AbsolutePosition.Y
				local maxX, maxY = colorSquare.AbsoluteSize.X, colorSquare.AbsoluteSize.Y

				if x < 0 then x = 0 end
				if x > maxX then x = maxX end
				if y < 0 then y = 0 end
				if y > maxY then y = maxY end

				x = x / maxX
				y = y / maxY

				svCircle.Position = UDim2.new(x, 0, y, 0)

				h = 1 - x 
				s = 1 - y 

				setColor(Color3.fromHSV(h, s, v), false)
			end

			if darknessActive then
				local y = Mouse.Y - brightnessSlider.AbsolutePosition.Y
				local maxY = brightnessSlider.AbsoluteSize.Y

				if y < 0 then y = 0 end
				if y > maxY then y = maxY end

				y = y / maxY

				brightnessCircle.Position = UDim2.new(0.5, 0, y, 0)

				v = 1 - y 
				setColor(Color3.fromHSV(h, s, v), false)
			end
		end


		local function toggleRainbow()
			rainbowEnabled = not rainbowEnabled

			if rainbowEnabled then
				game.TweenService:Create(toggleIcon, TweenInfo.new(0.1, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
					ImageTransparency = 0
				}):Play()
			--	toggleBckg.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

				if rainbowConnection then
					rainbowConnection:Disconnect()
				end

				local startTime = tick()
				rainbowConnection = rs.RenderStepped:Connect(function()
					if not rainbowEnabled then 
						rainbowConnection:Disconnect()
						return 
					end

					h = (tick() - startTime) % 5 / 5
					setColor(Color3.fromHSV(h, s, v))
				end)
			else
				-- Disable rainbow
				game.TweenService:Create(toggleIcon, TweenInfo.new(0.1, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
					ImageTransparency = 1
				}):Play()
			--	toggleBckg.BackgroundColor3 = Color3.fromRGB(29, 29, 29)

				-- Disconnect rainbow connection
				if rainbowConnection then
					rainbowConnection:Disconnect()
					rainbowConnection = nil
				end
			end
		end

		colorSquare.MouseButton1Down:Connect(function()
			colorpickerActive = true
			updateColorPicker()
		end)


		brightnessSlider.MouseButton1Down:Connect(function()
			darknessActive = true
			updateColorPicker()
		end)

		UserInputService.InputEnded:Connect(function(input)
			if input.UserInputType.Name == 'MouseButton1' then
				if darknessActive then darknessActive = false end
				if colorpickerActive then colorpickerActive = false end
			end
		end)

		UserInputService.InputChanged:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement then
				updateColorPicker()
			end
		end)

		for _, box in pairs({rBox, gBox, bBox}) do
			box.FocusLost:Connect(function()
				local r = math.clamp(tonumber(rBox.Text) or 0, 0, 255) / 255
				local g = math.clamp(tonumber(gBox.Text) or 0, 0, 255) / 255
				local b = math.clamp(tonumber(bBox.Text) or 0, 0, 255) / 255
				setColor(Color3.new(r, g, b))
			end)
		end
		
		
		toggleBckg.MouseButton1Click:Connect(toggleRainbow)
		
		
		
		-- Open/close
		colorElement.MouseButton1Click:Connect(function()
			colorOpened = not colorOpened
			local goal = {Size = colorOpened and UDim2.new(1, -20, 0, 170) or UDim2.new(1, -20, 0, 0)}
			TweenService:Create(colorInners, TweenInfo.new(0.2), goal):Play()

			if not colorOpened and rainbowEnabled then
				toggleRainbow()
			end
		end)

		-- Set initial color
		setColor(defcolor)
	end
	
	
	function Library:MultiDropdown(tab, dropdownName, options, callback, settings)
		settings = settings or {}
		callback = callback or function() end
		local selectedOptions = {}
		local MdrFunction = {}

		local customFont = settings.customFont or Enum.Font.GothamMedium
		local customFontSize = settings.customFontSize or 12
		local maxVisibleOptions = settings.maxVisibleOptions or 5
		local searchPlaceholder = settings.searchPlaceholder or "Search..."
		local showTooltips = settings.showTooltips ~= false

		assert(type(options) == "table" and #options > 0, "Options should be a non-empty table.")

		local isOpen = false
		local openDropdown = nil
		
		
		-- Theme colors
		local elementColor = Library:GetThemeColor("Element")
		local strokeColor = Library:GetThemeColor("Stroke")
		local bgColor = Library:GetThemeColor("Background")
		local textColor = Library:GetThemeColor("Text")
		local textSecondaryColor = Library:GetThemeColor("TextSecondary")
		local hoverColor = Library:GetThemeColor("Hover") or elementColor:Lerp(Color3.new(1,1,1), 0.05)
		local selectedColor = Library:GetThemeColor("Success") or Color3.fromRGB(0, 255, 0)
		local disabledColor = elementColor:Lerp(Color3.new(0,0,0), 0.2)

		-- Main Dropdown
		local Dropdown = Instance.new("TextButton")
		Dropdown.Name = "Dropdown"
		Dropdown.Parent = tab
		Dropdown.BackgroundColor3 = elementColor
		Dropdown.BorderSizePixel = 0
		Dropdown.Size = UDim2.new(1, -20, 0, 32)
		Dropdown.AutoButtonColor = false
		Dropdown.Text = ""

		local UIStroke = Instance.new("UIStroke")
		UIStroke.Color = strokeColor
		UIStroke.Thickness = 1.5
		UIStroke.Parent = Dropdown

		local UIC = Instance.new("UICorner")
		UIC.CornerRadius = UDim.new(0, 6)
		UIC.Parent = Dropdown

		local Main = Instance.new("Frame")
		Main.Name = "Main"
		Main.Parent = Dropdown
		Main.BackgroundTransparency = 1
		Main.Size = UDim2.new(1, 0, 1, 0)

		local Icon = Instance.new("ImageLabel")
		Icon.Name = "Icon"
		Icon.Parent = Main
		Icon.AnchorPoint = Vector2.new(0.5, 0.5)
		Icon.BackgroundTransparency = 1
		Icon.Position = UDim2.new(1, -16, 0.5, 0)
		Icon.Size = UDim2.new(0, 16, 0, 16)
		Icon.Image = "rbxassetid://6031091000"
		Icon.ImageColor3 = textSecondaryColor

		local Title = Instance.new("TextLabel")
		Title.Name = "Title"
		Title.Parent = Main
		Title.BackgroundTransparency = 1
		Title.Size = UDim2.new(1, -35, 1, 0)
		Title.Font = customFont
		Title.Text = dropdownName
		Title.TextColor3 = textColor
		Title.TextSize = customFontSize
		Title.TextXAlignment = Enum.TextXAlignment.Left

		local UIPadding = Instance.new("UIPadding")
		UIPadding.Parent = Title
		UIPadding.PaddingLeft = UDim.new(0, 12)

		-- Search Box
		local SearchBox = Instance.new("TextBox")
		SearchBox.Name = "SearchBox"
		SearchBox.Parent = tab
		SearchBox.BackgroundColor3 = elementColor
		SearchBox.BorderSizePixel = 0
		SearchBox.Size = UDim2.new(1, -20, 0, 28)
		SearchBox.Text = ""
		SearchBox.PlaceholderText = searchPlaceholder
		SearchBox.PlaceholderColor3 = textSecondaryColor
		SearchBox.TextColor3 = textColor
		SearchBox.TextSize = customFontSize
		SearchBox.ClearTextOnFocus = false
		SearchBox.Visible = false

		local SearchCorner = Instance.new("UICorner")
		SearchCorner.CornerRadius = UDim.new(0, 6)
		SearchCorner.Parent = SearchBox

		local SearchStroke = Instance.new("UIStroke")
		SearchStroke.Color = strokeColor
		SearchStroke.Thickness = 1.5
		SearchStroke.Parent = SearchBox

		-- Option List
		local List = Instance.new("ScrollingFrame")
		List.Name = "List"
		List.Parent = tab
		List.BackgroundColor3 = bgColor
		List.BorderSizePixel = 0
		List.Size = UDim2.new(1, -20, 0, math.min(maxVisibleOptions * 30, #options * 30))
		List.ClipsDescendants = true
		List.CanvasSize = UDim2.new(0, 0, 0, #options * 30)
		List.ScrollBarThickness = 4
		List.ScrollingDirection = Enum.ScrollingDirection.Y
		List.Visible = false

		local ListCorner = Instance.new("UICorner")
		ListCorner.CornerRadius = UDim.new(0, 6)
		ListCorner.Parent = List

		local ListStroke = Instance.new("UIStroke")
		ListStroke.Color = strokeColor
		ListStroke.Thickness = 1.5
		ListStroke.Parent = List

		local UIListLayout = Instance.new("UIListLayout")
		UIListLayout.Parent = List
		UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
		UIListLayout.Padding = UDim.new(0, 4)
		
		
		self:RegisterObject(Dropdown, {BackgroundColor3 = "Element"})
		self:RegisterObject(UIStroke, {Color = "Stroke"})
		self:RegisterObject(Title, {TextColor3 = "Text"})
		self:RegisterObject(Icon, {ImageColor3 = "TextSecondary"})
		self:RegisterObject(SearchBox, {BackgroundColor3 = "Element", TextColor3 = "Text", PlaceholderColor3 = "TextSecondary"})
		self:RegisterObject(SearchStroke, {Color = "Stroke"})
		self:RegisterObject(List, {BackgroundColor3 = "Background"})
		self:RegisterObject(ListStroke, {Color = "Stroke"})
		
		
		-- Create individual options
		local function createOption(i, optionText)
			local Option = Instance.new("TextButton")
			Option.Name = "Option" .. i
			Option.Parent = List
			Option.BackgroundColor3 = elementColor
			Option.BorderSizePixel = 0
			Option.Size = UDim2.new(1, 0, 0, 28)
			Option.AutoButtonColor = false
			Option.Text = ""

			local OptionCorner = Instance.new("UICorner")
			OptionCorner.CornerRadius = UDim.new(0, 4)
			OptionCorner.Parent = Option

			local OptionStroke = Instance.new("UIStroke")
			OptionStroke.Color = strokeColor
			OptionStroke.Thickness = 1
			OptionStroke.Parent = Option

			-- Checkbox
			local Checkbox = Instance.new("Frame")
			Checkbox.Name = "Checkbox"
			Checkbox.Parent = Option
			Checkbox.BackgroundColor3 = disabledColor
			Checkbox.BorderSizePixel = 0
			Checkbox.Size = UDim2.new(0, 16, 0, 16)
			Checkbox.Position = UDim2.new(0, 8, 0.5, -8)

			local CheckboxCorner = Instance.new("UICorner")
			CheckboxCorner.CornerRadius = UDim.new(0, 3)
			CheckboxCorner.Parent = Checkbox

			local CheckboxStroke = Instance.new("UIStroke")
			CheckboxStroke.Color = strokeColor
			CheckboxStroke.Thickness = 1.5
			CheckboxStroke.Parent = Checkbox

			local Icon = Instance.new("ImageLabel")
			Icon.Name = "Icon"
			Icon.AnchorPoint = Vector2.new(0.5, 0.5)
			Icon.BackgroundTransparency = 1
			Icon.Position = UDim2.new(0.5, 0, 0.5, 0)
			Icon.Size = UDim2.new(0, 12, 0, 12)
			Icon.Image = "rbxassetid://13319773302"
			Icon.ImageColor3 = selectedColor
			Icon.ImageTransparency = 1
			Icon.Parent = Checkbox

			-- Option label
			local OptionLabel = Instance.new("TextLabel")
			OptionLabel.Name = "OptionText"
			OptionLabel.Parent = Option
			OptionLabel.BackgroundTransparency = 1
			OptionLabel.Size = UDim2.new(1, -32, 1, 0)
			OptionLabel.Position = UDim2.new(0, 28, 0, 0)
			OptionLabel.Text = optionText
			OptionLabel.TextColor3 = textColor
			OptionLabel.TextSize = customFontSize
			OptionLabel.Font = customFont
			OptionLabel.TextXAlignment = Enum.TextXAlignment.Left
			
			self:RegisterObject(Option, {BackgroundColor3 = "Element"})
			self:RegisterObject(OptionStroke, {Color = "Stroke"})
			self:RegisterObject(Checkbox, {BackgroundColor3 = "Disabled"})
			self:RegisterObject(CheckboxStroke, {Color = "Stroke"})
			self:RegisterObject(Icon, {ImageColor3 = "Success"})
			self:RegisterObject(OptionLabel, {TextColor3 = "Text"})
			
			
			
			-- Hover & click
			Option.MouseEnter:Connect(function()
				local currhoverColor = Library:GetThemeColor("Hover") or elementColor:Lerp(Color3.new(1,1,1), 0.05)
				--Library:Tween(Option, {BackgroundColor3 = currhoverColor}, 0.15)
				
			end)
			
			
			Option.MouseLeave:Connect(function()
				local currentSelectedColor = Library:GetThemeColor("Success") or Color3.fromRGB(0, 255, 0)
				local CurrelementColor = Library:GetThemeColor("Element")
				local currstrokeColor = Library:GetThemeColor("Stroke")
				local currhoverColor = Library:GetThemeColor("Hover") or elementColor:Lerp(Color3.new(1,1,1), 0.05)
				local currtextColor = Library:GetThemeColor("TextHover")
				local textSecondaryColor = Library:GetThemeColor("TextSecondary")
				
				
				
				if table.find(selectedOptions, optionText) then
					OptionLabel.TextColor3 = currtextColor
					--Library:Tween(Option, {BackgroundColor3 = currentSelectedColor}, 0.15)
				else
					--Library:Tween(Option, {BackgroundColor3 = currentElementColor}, 0.15)
				end
			end)
			
			
			Option.MouseButton1Click:Connect(function()
				if table.find(selectedOptions, optionText) then
					table.remove(selectedOptions, table.find(selectedOptions, optionText))
					Icon.ImageTransparency = 1
					Checkbox.BackgroundColor3 = disabledColor
				else
					table.insert(selectedOptions, optionText)
					Icon.ImageTransparency = 0
					Checkbox.BackgroundColor3 = selectedColor
				end

				if #selectedOptions == 0 then
					Title.Text = dropdownName
				elseif #selectedOptions == 1 then
					Title.Text = selectedOptions[1]
				else
					Title.Text = dropdownName.." ("..#selectedOptions..")"
				end

				callback(selectedOptions)
			end)
		end

		-- Create all options
		for i, optionText in ipairs(options) do
			createOption(i, optionText)
		end

		-- Search filter
		local function updateOptions(filterText)
			for i, optionText in ipairs(options) do
				local optionButton = List:FindFirstChild("Option" .. i)
				if optionButton then
					optionButton.Visible = not filterText or optionText:lower():find(filterText:lower())
				end
			end
		end
		SearchBox:GetPropertyChangedSignal("Text"):Connect(function()
			updateOptions(SearchBox.Text)
		end)
		
		Dropdown.MouseEnter:Connect(function()
			Library:Tween(Title, {TextColor3 = Library:GetThemeColor("Text")}, 0.15)
		end)
		
		Dropdown.MouseLeave:Connect(function()
			Library:Tween(Title, {TextColor3 = Library:GetThemeColor("TextHover")}, 0.15)
		end)
		
		
		
		-- Dropdown toggle
		Dropdown.MouseButton1Click:Connect(function()
			if isOpen then
				Icon.Image = "rbxassetid://6031091000"
				List.Visible = false
				SearchBox.Visible = false
				isOpen = false
				openDropdown = nil
			else
				if openDropdown then
					openDropdown.List.Visible = false
					openDropdown.SearchBox.Visible = false
				end
				Icon.Image = "rbxassetid://6031090999"
				List.Visible = true
				SearchBox.Visible = true
				SearchBox:CaptureFocus()
				isOpen = true
				openDropdown = Dropdown
			end
		end)

		-- API functions
		function MdrFunction:Update(newOptions)
			options = newOptions
			selectedOptions = {}
			Title.Text = dropdownName

			for _, child in ipairs(List:GetChildren()) do
				if child:IsA("TextButton") then child:Destroy() end
			end

			List.CanvasSize = UDim2.new(0, 0, 0, #options * 28)
			List.Size = UDim2.new(1, -20, 0, math.min(maxVisibleOptions * 28, #options * 28))

			for i, optionText in ipairs(options) do
				createOption(i, optionText)
			end
		end

		function MdrFunction:SetSel(selected)
			selectedOptions = selected or {}
			for i, optionText in ipairs(options) do
				local optionButton = List:FindFirstChild("Option" .. i)
				if optionButton then
					local Checkbox = optionButton:FindFirstChild("Checkbox")
					local Icon = Checkbox and Checkbox:FindFirstChild("Icon")
					if table.find(selectedOptions, optionText) then
						if Icon then Icon.ImageTransparency = 0 end
						-- Checkbox.BackgroundColor3 = selectedColor
						Library:Tween(Checkbox, {BackgroundColor3 = selectedColor}, 0.15)

						Library:Tween(optionButton, {BackgroundColor3 = selectedColor}, 0.15)

					else
						if Icon then Icon.ImageTransparency = 1 end
						Library:Tween(Checkbox, {BackgroundColor3 = disabledColor}, 0.15)
						Library:Tween(optionButton, {BackgroundColor3 = elementColor}, 0.15)
					end
				end
			end

			if #selectedOptions == 0 then
				Title.Text = dropdownName
			elseif #selectedOptions == 1 then
				Title.Text = selectedOptions[1]
			else
				Title.Text = dropdownName.." ("..#selectedOptions..")"
			end

			callback(selectedOptions)
		end


		function MdrFunction:GetSel()
			return selectedOptions
		end

		return MdrFunction
	end

	function Library:Dropdown(tab, dropdownName, options, callback, settings)
		settings = settings or {}
		callback = callback or function() end
		local DropFunction = {}

		local customFont = settings.customFont or Enum.Font.GothamMedium
		local customFontSize = settings.customFontSize or 12
		local maxVisibleOptions = settings.maxVisibleOptions or 5
		local searchPlaceholder = settings.searchPlaceholder or "Search..."

		assert(type(options) == "table" and #options > 0, "Options should be a non-empty table.")

		local isOpen = false
		local openDropdown = nil
		local selectedOption = nil

		-- Theme colors
		local elementColor = Library:GetThemeColor("Element")
		local strokeColor = Library:GetThemeColor("Stroke")
		local bgColor = Library:GetThemeColor("Background")
		local textColor = Library:GetThemeColor("Text")
		local textSecondaryColor = Library:GetThemeColor("TextSecondary")
		local hoverColor = Library:GetThemeColor("Hover") or elementColor:Lerp(Color3.new(1,1,1), 0.05)
		local selectedColor = Library:GetThemeColor("Success") or Color3.fromRGB(0, 255, 0)

		-- Main Dropdown
		local Dropdown = Instance.new("TextButton")
		Dropdown.Name = "Dropdown"
		Dropdown.Parent = tab
		Dropdown.BackgroundColor3 = elementColor
		Dropdown.BorderSizePixel = 0
		Dropdown.Size = UDim2.new(1, -20, 0, 31)
		Dropdown.AutoButtonColor = false
		Dropdown.Text = ""

		local UIStroke = Instance.new("UIStroke")
		UIStroke.Parent = Dropdown
		UIStroke.Color = strokeColor
		UIStroke.Thickness = 1.5

		local UICorner = Instance.new("UICorner")
		UICorner.CornerRadius = UDim.new(0, 6)
		UICorner.Parent = Dropdown

		local Main = Instance.new("Frame")
		Main.Name = "Main"
		Main.Parent = Dropdown
		Main.BackgroundTransparency = 1
		Main.Size = UDim2.new(1, 0, 1, 0)

		local Title = Instance.new("TextLabel")
		Title.Name = "Title"
		Title.Parent = Main
		Title.BackgroundTransparency = 1
		Title.Size = UDim2.new(1, -35, 1, 0)
		Title.Font = customFont
		Title.Text = dropdownName
		Title.TextColor3 = textColor
		Title.TextSize = customFontSize
		Title.TextXAlignment = Enum.TextXAlignment.Left

		local UIPadding = Instance.new("UIPadding")
		UIPadding.Parent = Title
		UIPadding.PaddingLeft = UDim.new(0, 12)

		local Icon = Instance.new("ImageLabel")
		Icon.Name = "Icon"
		Icon.Parent = Main
		Icon.AnchorPoint = Vector2.new(0.5, 0.5)
		Icon.BackgroundTransparency = 1
		Icon.Position = UDim2.new(1, -16, 0.5, 0)
		Icon.Size = UDim2.new(0, 16, 0, 16)
		Icon.Image = "rbxassetid://6031091000"
		Icon.ImageColor3 = textSecondaryColor

		-- Search box
		local SearchBox = Instance.new("TextBox")
		SearchBox.Name = "SearchBox"
		SearchBox.Parent = tab
		SearchBox.BackgroundColor3 = elementColor
		SearchBox.BorderSizePixel = 0
		SearchBox.Position = UDim2.new(0, 0, 0, Dropdown.AbsolutePosition.Y + Dropdown.AbsoluteSize.Y + 5)
		SearchBox.Size = UDim2.new(1, -20, 0, 28)
		SearchBox.Text = ""
		SearchBox.PlaceholderText = searchPlaceholder
		SearchBox.PlaceholderColor3 = textSecondaryColor
		SearchBox.TextColor3 = textColor
		SearchBox.TextSize = customFontSize
		SearchBox.ClearTextOnFocus = false
		SearchBox.Visible = false

		local SearchCorner = Instance.new("UICorner")
		SearchCorner.CornerRadius = UDim.new(0, 6)
		SearchCorner.Parent = SearchBox

		local SearchStroke = Instance.new("UIStroke")
		SearchStroke.Color = strokeColor
		SearchStroke.Thickness = 1.5
		SearchStroke.Parent = SearchBox

		-- Options list
		local List = Instance.new("ScrollingFrame")
		List.Name = "List"
		List.Parent = tab
		List.BackgroundColor3 = bgColor
		List.BorderSizePixel = 0
		--	List.Size = UDim2.new(1, -20, 0, math.min(maxVisibleOptions * 30, #options * 30))
		List.Position = UDim2.new(0, 0, 0, SearchBox.AbsolutePosition.Y + SearchBox.AbsoluteSize.Y + 5)
		List.Size = UDim2.new(1, -20, 0, math.min(maxVisibleOptions * 28, #options * 28))
		List.ClipsDescendants = true
		local uiPadding = UIListLayout.Padding.Offset
		--List.CanvasSize = UDim2.new(0, 0, 0, (#options * (28 + uiPadding)))

		List.CanvasSize = UDim2.new(0, 0, 0, #options * 30)
		List.ScrollBarThickness = 4
		List.ScrollingDirection = Enum.ScrollingDirection.Y
		List.Visible = false
		
		
		local ListCorner = Instance.new("UICorner")
		ListCorner.CornerRadius = UDim.new(0, 6)
		ListCorner.Parent = List

		local ListStroke = Instance.new("UIStroke")
		ListStroke.Color = strokeColor
		ListStroke.Thickness = 1.5
		ListStroke.Parent = List
		
		
		local UIListLayout = Instance.new("UIListLayout")
		UIListLayout.Parent = List
		UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
		UIListLayout.Padding = UDim.new(0, 3)

		-- Register for theme
		self:RegisterObject(Dropdown, {BackgroundColor3 = "Element"})
		self:RegisterObject(UIStroke, {Color = "Stroke"})
		self:RegisterObject(UICorner, {}) -- corners usually don't change color
		self:RegisterObject(Title, {TextColor3 = "Text"})
		self:RegisterObject(Icon, {ImageColor3 = "TextSecondary"})
		self:RegisterObject(SearchBox, {BackgroundColor3 = "Element", TextColor3 = "Text", PlaceholderColor3 = "TextSecondary"})
		self:RegisterObject(SearchStroke, {Color = "Stroke"})
		self:RegisterObject(SearchCorner, {}) 
		self:RegisterObject(List, {BackgroundColor3 = "Background"})
		self:RegisterObject(ListStroke, {Color = "Stroke"})
		self:RegisterObject(ListCorner, {})

		
		
		-- Internal functions
		local function updateTitle()
			Title.Text = selectedOption or dropdownName
		end

		local function toggleDropdown(state)
			if state == nil then state = not isOpen end
			if state then
				if openDropdown and openDropdown ~= Dropdown then
					openDropdown.List.Visible = false
					openDropdown.SearchBox.Visible = false
					openDropdown.Icon.Image = "rbxassetid://6031091000"
				end

				task.defer(function() -- wait one render frame for absolute size/position
					local dropdownY = Dropdown.AbsolutePosition.Y + Dropdown.AbsoluteSize.Y + 5
					local searchY = dropdownY + SearchBox.AbsoluteSize.Y + 5

					SearchBox.Position = UDim2.new(0, 0, 0, dropdownY)
					List.Position = UDim2.new(0, 0, 0, searchY)
				end)

				Icon.Image = "rbxassetid://6031090999"
				SearchBox.Visible = true
				List.Visible = true
				SearchBox:CaptureFocus()
				isOpen = true
				openDropdown = Dropdown
			else
				Icon.Image = "rbxassetid://6031091000"
				SearchBox.Visible = false
				List.Visible = false
				isOpen = false
				openDropdown = nil
			end
		end


		local function createOptions()
			for _, child in ipairs(List:GetChildren()) do
				if child:IsA("TextButton") then child:Destroy() end
			end
			
			local currelementColor = Library:GetThemeColor("Element")
			local currtextColor = Library:GetThemeColor("Text")
			local textSecondaryColor = Library:GetThemeColor("TextSecondary")
			
			for i, optionText in ipairs(options) do
				local Option = Instance.new("TextButton")
				Option.Name = "Option"..i
				Option.Parent = List
				Option.BackgroundColor3 = currelementColor
			--	Option.BackgroundTransparency = 1
				Option.BorderSizePixel = 0
				Option.Size = UDim2.new(1, 0, 0, 28)
				Option.AutoButtonColor = false
				Option.Text = ""
				
				local OptionCorner = Instance.new("UICorner")
				OptionCorner.CornerRadius = UDim.new(0, 4)
				OptionCorner.Parent = Option

				local OptionStroke = Instance.new("UIStroke")
				OptionStroke.Color = strokeColor
				OptionStroke.Thickness = 1
				OptionStroke.Parent = Option

				local OptionLabel = Instance.new("TextLabel")
				OptionLabel.Name = "OptionText"
				OptionLabel.Parent = Option
				OptionLabel.BackgroundTransparency = 1
				OptionLabel.Size = UDim2.new(1, -12, 1, 0)
				OptionLabel.Position = UDim2.new(0, 12, 0, 0)
				OptionLabel.Text = optionText
				OptionLabel.TextColor3 = textColor
				OptionLabel.TextSize = customFontSize
				OptionLabel.Font = customFont
				OptionLabel.TextXAlignment = Enum.TextXAlignment.Left

				local SelectionIndicator = Instance.new("Frame")
				SelectionIndicator.Name = "SelectionIndicator"
				SelectionIndicator.Parent = Option
				SelectionIndicator.BackgroundColor3 = selectedColor
				SelectionIndicator.BorderSizePixel = 0
				SelectionIndicator.Size = UDim2.new(0, 3, 0.7, 0)
				SelectionIndicator.Position = UDim2.new(0, 4, 0.15, 0)
				SelectionIndicator.Visible = false

				local IndicatorCorner = Instance.new("UICorner")
				IndicatorCorner.CornerRadius = UDim.new(0, 2)
				IndicatorCorner.Parent = SelectionIndicator
				
				self:RegisterObject(Option, {BackgroundColor3 = "Element"})
				self:RegisterObject(OptionStroke, {Color = "Stroke"})
				self:RegisterObject(OptionLabel, {TextColor3 = "Text"})
				self:RegisterObject(SelectionIndicator, {BackgroundColor3 = "Success"})
				
				
				if optionText == selectedOption then
					SelectionIndicator.Visible = true
					Option.BackgroundColor3 = selectedColor
				end

				Option.MouseButton1Click:Connect(function()
					selectedOption = optionText
					updateTitle()
					for _, opt in ipairs(List:GetChildren()) do
						if opt:IsA("TextButton") then
						--	opt.BackgroundColor3 = (opt == Option and selectedColor or elementColor)
							opt.SelectionIndicator.Visible = (opt == Option)
						end
					end
					callback(selectedOption)
					toggleDropdown(false)
				end)

				Option.MouseEnter:Connect(function()
					local CurrelementColor = Library:GetThemeColor("Element")
					local currstrokeColor = Library:GetThemeColor("Stroke")
					local currhoverColor = Library:GetThemeColor("Hover") or elementColor:Lerp(Color3.new(1,1,1), 0.05)
					local currtextColor = Library:GetThemeColor("TextHover")
					local textSecondaryColor = Library:GetThemeColor("TextSecondary")
					
					if OptionLabel.Text ~= selectedOption then
					--	Option.BackgroundColor3 = currhoverColor
						OptionLabel.TextColor3 = currtextColor
					end
				end)
				
				Option.MouseLeave:Connect(function()
					local CurrLelementColor = Library:GetThemeColor("Element")
					local currLstrokeColor = Library:GetThemeColor("Stroke")
					local currtextColor = Library:GetThemeColor("Text")
					local textSecondaryColor = Library:GetThemeColor("TextSecondary")
					
					
					if OptionLabel.Text ~= selectedOption then
					--	Option.BackgroundColor3 = CurrLelementColor
						OptionLabel.TextColor3 = currtextColor
					end
				end)
			end
		end

		SearchBox:GetPropertyChangedSignal("Text"):Connect(function()
			local searchText = string.lower(SearchBox.Text)
			for _, option in ipairs(List:GetChildren()) do
				if option:IsA("TextButton") then
					option.Visible = searchText == "" or string.find(string.lower(option.OptionText.Text), searchText)
				end
			end
		end)

		createOptions()
		updateTitle()
		Dropdown.MouseButton1Click:Connect(toggleDropdown)

		local function isMouseOverGui(guiObject)
			local mouse = game.Players.LocalPlayer:GetMouse()
			local guiPos = guiObject.AbsolutePosition
			local guiSize = guiObject.AbsoluteSize
			return mouse.X >= guiPos.X and mouse.X <= guiPos.X + guiSize.X
				and mouse.Y >= guiPos.Y and mouse.Y <= guiPos.Y + guiSize.Y
		end

		game:GetService("UserInputService").InputBegan:Connect(function(input, processed)
			if not processed and (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
				if isOpen and not isMouseOverGui(Dropdown) and not isMouseOverGui(List) and not isMouseOverGui(SearchBox) then
					toggleDropdown(false)
				end
			end
		end)

		function DropFunction:Update(newOptions)
			options = newOptions
			selectedOption = nil
			updateTitle()
			createOptions()
			List.Size = UDim2.new(1, -20, 0, math.min(maxVisibleOptions * 28, #options * 28))
			List.CanvasSize = UDim2.new(0, 0, 0, #options * 28)
		end

		function DropFunction:Setdrop(optionText)
			if table.find(options, optionText) then
				selectedOption = optionText
				updateTitle()
				for _, opt in ipairs(List:GetChildren()) do
					if opt:IsA("TextButton") then
						opt.BackgroundColor3 = (opt.OptionText.Text == optionText and selectedColor or elementColor)
						opt.SelectionIndicator.Visible = (opt.OptionText.Text == optionText)
					end
				end
				callback(selectedOption)
			end
		end

		function DropFunction:GetSel()
			return selectedOption
		end

		return DropFunction
	end

	return Library
end

return {
	Animations = Animations, 
	Library = Library,
	SetTheme = function(theme) return Library:SetTheme(theme) end,
	GetTheme = function() return Library:GetTheme() end,
	GetThemes = function() return Library:GetThemes() end,
	AddThemeSelector = function(tab) return Library:AddThemeSelector(tab) end
}



--UDim2.new(0.5, 0, 0.5, 0)








